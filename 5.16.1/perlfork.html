      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlfork - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlfork - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlfork.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.16.1/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.16.1/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.16.1/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.16.1/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.1/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.1/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-language.html">Language reference</a> &gt;
      
    
    perlfork
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 16.1
                        documentation</h7>
                    </div>
                    <h1>perlfork</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Behavior-of-other-Perl-features-in-forked-pseudo-processes">Behavior of other Perl features in forked pseudo-processes</a></li><li><a href="#Resource-limits">Resource limits</a></li><li><a href="#Killing-the-parent-process">Killing the parent process</a></li><li><a href="#Lifetime-of-the-parent-process-and-pseudo-processes">Lifetime of the parent process and pseudo-processes</a></li></ul><li><a href="#CAVEATS-AND-LIMITATIONS">CAVEATS AND LIMITATIONS</a></li><li><a href="#PORTABILITY-CAVEATS">PORTABILITY CAVEATS</a></li><li><a href="#BUGS">BUGS</a></li><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlfork - Perl's fork() emulation</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>    <span class="j">NOTE:</span>  <span class="w">As</span> <span class="w">of</span> <span class="w">the</span> <span class="v">5.8.0</span> <span class="w">release</span><span class="cm">,</span> <a class="l_k" href="functions/fork.html">fork</a><span class="s">(</span><span class="s">)</span> <span class="w">emulation</span> <span class="w">has</span> <span class="w">considerably</span></li><li>    <span class="w">matured</span>.  <span class="w">However</span><span class="cm">,</span> <span class="w">there</span> <span class="w">are</span> <span class="w">still</span> <span class="w">a</span> <span class="w">few</span> <span class="w">known</span> <span class="w">bugs</span> <a class="l_k" href="functions/and.html">and</a> <span class="w">differences</span></li><li>    <span class="w">from</span> <span class="w">real</span> <a class="l_k" href="functions/fork.html">fork</a><span class="s">(</span><span class="s">)</span> <span class="w">that</span> <span class="w">might</span> <span class="w">affect</span> <span class="w">you</span>.  <span class="w">See</span> <span class="w">the</span> <span class="q">&quot;BUGS&quot;</span> <a class="l_k" href="functions/and.html">and</a></li><li>    <span class="q">&quot;CAVEATS AND LIMITATIONS&quot;</span> <span class="w">sections</span> <span class="w">below</span>.</li></ol></pre><p>Perl provides a fork() keyword that corresponds to the Unix system call
of the same name.  On most Unix-like platforms where the fork() system
call is available, Perl's fork() simply calls it.</p>
<p>On some platforms such as Windows where the fork() system call is not
available, Perl can be built to emulate fork() at the interpreter level.
While the emulation is designed to be as compatible as possible with the
real fork() at the level of the Perl program, there are certain
important differences that stem from the fact that all the pseudo child
"processes" created this way live in the same real process as far as the
operating system is concerned.</p>
<p>This document provides a general overview of the capabilities and
limitations of the fork() emulation.  Note that the issues discussed here
are not applicable to platforms where a real fork() is available and Perl
has been configured to use it.</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>The fork() emulation is implemented at the level of the Perl interpreter.
What this means in general is that running fork() will actually clone the
running interpreter and all its state, and run the cloned interpreter in
a separate thread, beginning execution in the new thread just after the
point where the fork() was called in the parent.  We will refer to the
thread that implements this child "process" as the pseudo-process.</p>
<p>To the Perl program that called fork(), all this is designed to be
transparent.  The parent returns from the fork() with a pseudo-process
ID that can be subsequently used in any process-manipulation functions;
the child returns from the fork() with a value of <code class="inline"><span class="n">0</span></code>
 to signify that
it is the child pseudo-process.</p>
<a class='view-head2' id="Behavior-of-other-Perl-features-in-forked-pseudo-processes"></a><h3 class='h3' >Behavior of other Perl features in forked pseudo-processes</h3>
<p>Most Perl features behave in a natural way within pseudo-processes.</p>
<ul>
<li><a class='view-title' id="%24%24-or-%24PROCESS_ID"></a><strong>$$ or $PROCESS_ID</strong>
<p>This special variable is correctly set to the pseudo-process ID.
It can be used to identify pseudo-processes within a particular
session.  Note that this value is subject to recycling if any
pseudo-processes are launched after others have been wait()-ed on.</p>
</li>
<li><a class='view-title' id="%25ENV"></a><strong>%ENV</strong>
<p>Each pseudo-process maintains its own virtual environment.  Modifications
to %ENV affect the virtual environment, and are only visible within that
pseudo-process, and in any processes (or pseudo-processes) launched from
it.</p>
</li>
<li><a class='view-title' id="chdir()-and-all-other-builtins-that-accept-filenames"></a><strong>chdir() and all other builtins that accept filenames</strong>
<p>Each pseudo-process maintains its own virtual idea of the current directory.
Modifications to the current directory using chdir() are only visible within
that pseudo-process, and in any processes (or pseudo-processes) launched from
it.  All file and directory accesses from the pseudo-process will correctly
map the virtual working directory to the real working directory appropriately.</p>
</li>
<li><a class='view-title' id="wait()-and-waitpid()"></a><strong>wait() and waitpid()</strong>
<p>wait() and waitpid() can be passed a pseudo-process ID returned by fork().
These calls will properly wait for the termination of the pseudo-process
and return its status.</p>
</li>
<li><a class='view-title' id="kill()"></a><strong>kill()</strong>
<p><code class="inline"><a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&#39;KILL&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 can be used to terminate a pseudo-process by
passing it the ID returned by fork(). The outcome of kill on a pseudo-process
is unpredictable and it should not be used except
under dire circumstances, because the operating system may not
guarantee integrity of the process resources when a running thread is
terminated.  The process which implements the pseudo-processes can be blocked
and the Perl interpreter hangs. Note that using <code class="inline"><a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&#39;KILL&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 on a
pseudo-process() may typically cause memory leaks, because the thread
that implements the pseudo-process does not get a chance to clean up
its resources.</p>
<p><code class="inline"><a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&#39;TERM&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 can also be used on pseudo-processes, but the
signal will not be delivered while the pseudo-process is blocked by a
system call, e.g. waiting for a socket to connect, or trying to read
from a socket with no data available.  Starting in Perl 5.14 the
parent process will not wait for children to exit once they have been
signalled with <code class="inline"><a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&#39;TERM&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 to avoid deadlock during process
exit.  You will have to explicitly call waitpid() to make sure the
child has time to clean-up itself, but you are then also responsible
that the child is not blocking on I/O either.</p>
</li>
<li><a class='view-title' id="exec()"></a><strong>exec()</strong>
<p>Calling exec() within a pseudo-process actually spawns the requested
executable in a separate process and waits for it to complete before
exiting with the same exit status as that process.  This means that the
process ID reported within the running executable will be different from
what the earlier Perl fork() might have returned.  Similarly, any process
manipulation functions applied to the ID returned by fork() will affect the
waiting pseudo-process that called exec(), not the real process it is
waiting for after the exec().</p>
<p>When exec() is called inside a pseudo-process then DESTROY methods and
END blocks will still be called after the external process returns.</p>
</li>
<li><a class='view-title' id="exit()"></a><strong>exit()</strong>
<p>exit() always exits just the executing pseudo-process, after automatically
wait()-ing for any outstanding child pseudo-processes.  Note that this means
that the process as a whole will not exit unless all running pseudo-processes
have exited.  See below for some limitations with open filehandles.</p>
</li>
<li><a class='view-title' id="Open-handles-to-files%2c-directories-and-network-sockets"></a><strong>Open handles to files, directories and network sockets</strong>
<p>All open handles are dup()-ed in pseudo-processes, so that closing
any handles in one process does not affect the others.  See below for
some limitations.</p>
</li>
</ul>
<a class='view-head2' id="Resource-limits"></a><h3 class='h3' >Resource limits</h3>
<p>In the eyes of the operating system, pseudo-processes created via the fork()
emulation are simply threads in the same process.  This means that any
process-level limits imposed by the operating system apply to all
pseudo-processes taken together.  This includes any limits imposed by the
operating system on the number of open file, directory and socket handles,
limits on disk space usage, limits on memory size, limits on CPU utilization
etc.</p>
<a class='view-head2' id="Killing-the-parent-process"></a><h3 class='h3' >Killing the parent process</h3>
<p>If the parent process is killed (either using Perl's kill() builtin, or
using some external means) all the pseudo-processes are killed as well,
and the whole process exits.</p>
<a class='view-head2' id="Lifetime-of-the-parent-process-and-pseudo-processes"></a><h3 class='h3' >Lifetime of the parent process and pseudo-processes</h3>
<p>During the normal course of events, the parent process and every
pseudo-process started by it will wait for their respective pseudo-children
to complete before they exit.  This means that the parent and every
pseudo-child created by it that is also a pseudo-parent will only exit
after their pseudo-children have exited.</p>
<p>Starting with Perl 5.14 a parent will not wait() automatically
for any child that has been signalled with <code class="inline"><span class="i">sig</span><span class="s">(</span><span class="q">&#39;TERM&#39;</span><span class="cm">,</span> ...<span class="s">)</span></code>

to avoid a deadlock in case the child is blocking on I/O and
never receives the signal.</p>
<a class='view-head1' id="CAVEATS-AND-LIMITATIONS"></a><h2 class='h2' >CAVEATS AND LIMITATIONS</h2>
<ul>
<li><a class='view-title' id="BEGIN-blocks"></a><strong>BEGIN blocks</strong>
<p>The fork() emulation will not work entirely correctly when called from
within a BEGIN block.  The forked copy will run the contents of the
BEGIN block, but will not continue parsing the source stream after the
BEGIN block.  For example, consider the following code:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span></li><li>        <a class="l_k" href="functions/fork.html">fork</a> <a class="l_k" href="functions/and.html">and</a> <a class="l_k" href="functions/exit.html">exit</a><span class="sc">;</span>		<span class="c"># fork child and exit the parent</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;inner\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;outer\n&quot;</span><span class="sc">;</span></li></ol></pre><p>This will print:</p>
<pre class="verbatim"><ol><li>    <span class="w">inner</span></li></ol></pre><p>rather than the expected:</p>
<pre class="verbatim"><ol><li>    <span class="w">inner</span></li><li>    <span class="w">outer</span></li></ol></pre><p>This limitation arises from fundamental technical difficulties in
cloning and restarting the stacks used by the Perl parser in the
middle of a parse.</p>
</li>
<li><a class='view-title' id="Open-filehandles"></a><strong>Open filehandles</strong>
<p>Any filehandles open at the time of the fork() will be dup()-ed.  Thus,
the files can be closed independently in the parent and child, but beware
that the dup()-ed handles will still share the same seek pointer.  Changing
the seek position in the parent will change it in the child and vice-versa.
One can avoid this by opening files that need distinct seek pointers
separately in the child.</p>
<p>On some operating systems, notably Solaris and Unixware, calling <code class="inline"><a class="l_k" href="functions/exit.html">exit()</a></code>
from a child process will flush and close open filehandles in the parent,
thereby corrupting the filehandles.  On these systems, calling <code class="inline"><span class="i">_exit</span><span class="s">(</span><span class="s">)</span></code>

is suggested instead.  <code class="inline"><span class="i">_exit</span><span class="s">(</span><span class="s">)</span></code>
 is available in Perl through the 
<code class="inline"><span class="w">POSIX</span></code>
 module.  Please consult your system's manpages for more information
on this.</p>
</li>
<li><a class='view-title' id="Open-directory-handles"></a><strong>Open directory handles</strong>
<p>Perl will completely read from all open directory handles until they
reach the end of the stream.  It will then seekdir() back to the
original location and all future readdir() requests will be fulfilled
from the cache buffer.  That means that neither the directory handle held
by the parent process nor the one held by the child process will see
any changes made to the directory after the fork() call.</p>
<p>Note that rewinddir() has a similar limitation on Windows and will not
force readdir() to read the directory again either.  Only a newly
opened directory handle will reflect changes to the directory.</p>
</li>
<li><a class='view-title' id="Forking-pipe-open()-not-yet-implemented"></a><strong>Forking pipe open() not yet implemented</strong>
<p>The <code class="inline"><a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FOO</span><span class="cm">,</span> <span class="q">&quot;|-&quot;</span><span class="s">)</span></code>
 and <code class="inline"><a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">BAR</span><span class="cm">,</span> <span class="q">&quot;-|&quot;</span><span class="s">)</span></code>
 constructs are not yet
implemented.  This limitation can be easily worked around in new code
by creating a pipe explicitly.  The following example shows how to
write to a forked child:</p>
<pre class="verbatim"><ol><li>    <span class="c"># simulate open(FOO, &quot;|-&quot;)</span></li><li><a name="pipe_to_fork"></a>    sub <span class="m">pipe_to_fork ($)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$parent</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/pipe.html">pipe</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$child</span><span class="cm">,</span> <span class="i">$parent</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$pid</span> = <a class="l_k" href="functions/fork.html">fork</a><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;fork() failed: $!&quot;</span> <a class="l_k" href="functions/unless.html">unless</a> <a class="l_k" href="functions/defined.html">defined</a> <span class="i">$pid</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">$pid</span><span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/close.html">close</a> <span class="i">$child</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/close.html">close</a> <span class="i">$parent</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">STDIN</span><span class="cm">,</span> <span class="q">&quot;&lt;&amp;=&quot;</span> . <a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="i">$child</span><span class="s">)</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<span class="i">$pid</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">pipe_to_fork</span><span class="s">(</span><span class="q">&#39;FOO&#39;</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="c"># parent</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">FOO</span> <span class="q">&quot;pipe_to_fork\n&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/close.html">close</a> <span class="w">FOO</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>	<span class="c"># child</span></li><li>	<a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="q">&lt;STDIN&gt;</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a><span class="sc">;</span> <span class="s">}</span></li><li>	<a class="l_k" href="functions/exit.html">exit</a><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>And this one reads from the child:</p>
<pre class="verbatim"><ol><li>    <span class="c"># simulate open(FOO, &quot;-|&quot;)</span></li><li><a name="pipe_from_fork"></a>    sub <span class="m">pipe_from_fork ($)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$parent</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/pipe.html">pipe</a> <span class="i">$parent</span><span class="cm">,</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$child</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$pid</span> = <a class="l_k" href="functions/fork.html">fork</a><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;fork() failed: $!&quot;</span> <a class="l_k" href="functions/unless.html">unless</a> <a class="l_k" href="functions/defined.html">defined</a> <span class="i">$pid</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">$pid</span><span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/close.html">close</a> <span class="i">$child</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/close.html">close</a> <span class="i">$parent</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">STDOUT</span><span class="cm">,</span> <span class="q">&quot;&gt;&amp;=&quot;</span> . <a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="i">$child</span><span class="s">)</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<span class="i">$pid</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">pipe_from_fork</span><span class="s">(</span><span class="q">&#39;BAR&#39;</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="c"># parent</span></li><li>	<a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="q">&lt;BAR&gt;</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a><span class="sc">;</span> <span class="s">}</span></li><li>	<a class="l_k" href="functions/close.html">close</a> <span class="w">BAR</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/else.html">else</a> <span class="s">{</span></li><li>	<span class="c"># child</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;pipe_from_fork\n&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/exit.html">exit</a><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Forking pipe open() constructs will be supported in future.</p>
</li>
<li><a class='view-title' id="Global-state-maintained-by-XSUBs"></a><strong>Global state maintained by XSUBs</strong>
<p>External subroutines (XSUBs) that maintain their own global state may
not work correctly.  Such XSUBs will either need to maintain locks to
protect simultaneous access to global data from different pseudo-processes,
or maintain all their state on the Perl symbol table, which is copied
naturally when fork() is called.  A callback mechanism that provides
extensions an opportunity to clone their state will be provided in the
near future.</p>
</li>
<li><a class='view-title' id="Interpreter-embedded-in-larger-application"></a><strong>Interpreter embedded in larger application</strong>
<p>The fork() emulation may not behave as expected when it is executed in an
application which embeds a Perl interpreter and calls Perl APIs that can
evaluate bits of Perl code.  This stems from the fact that the emulation
only has knowledge about the Perl interpreter's own data structures and
knows nothing about the containing application's state.  For example, any
state carried on the application's own call stack is out of reach.</p>
</li>
<li><a class='view-title' id="Thread-safety-of-extensions"></a><strong>Thread-safety of extensions</strong>
<p>Since the fork() emulation runs code in multiple threads, extensions
calling into non-thread-safe libraries may not work reliably when
calling fork().  As Perl's threading support gradually becomes more
widely adopted even on platforms with a native fork(), such extensions
are expected to be fixed for thread-safety.</p>
</li>
</ul>
<a class='view-head1' id="PORTABILITY-CAVEATS"></a><h2 class='h2' >PORTABILITY CAVEATS</h2>
<p>In portable Perl code, <code class="inline"><a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="n">9</span><span class="cm">,</span> <span class="i">$child</span><span class="s">)</span></code>
 must not be used on forked processes.
Killing a forked process is unsafe and has unpredictable results.
See <a href="#kill()">kill()</a>, above.</p>
<a class='view-head1' id="BUGS"></a><h2 class='h2' >BUGS</h2>
<ul>
<li>
<p>Having pseudo-process IDs be negative integers breaks down for the integer
<code class="inline"><span class="n">-1</span></code>
 because the wait() and waitpid() functions treat this number as
being special.  The tacit assumption in the current implementation is that
the system never allocates a thread ID of <code class="inline"><span class="n">1</span></code>
 for user threads.  A better
representation for pseudo-process IDs will be implemented in future.</p>
</li>
<li>
<p>In certain cases, the OS-level handles created by the pipe(), socket(),
and accept() operators are apparently not duplicated accurately in
pseudo-processes.  This only happens in some situations, but where it
does happen, it may result in deadlocks between the read and write ends
of pipe handles, or inability to send or receive data across socket
handles.</p>
</li>
<li>
<p>This document may be incomplete in some respects.</p>
</li>
</ul>
<a class='view-head1' id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Support for concurrent interpreters and the fork() emulation was implemented
by ActiveState, with funding from Microsoft Corporation.</p>
<p>This document is authored and maintained by Gurusamy Sarathy
&lt;gsar@activestate.com&gt;.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p><a class='function-name' href="functions/fork.html">fork</a>, <a href="perlipc.html">perlipc</a></p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Behavior-of-other-Perl-features-in-forked-pseudo-processes">Behavior of other Perl features in forked pseudo-processes</a></li><li><a href="#Resource-limits">Resource limits</a></li><li><a href="#Killing-the-parent-process">Killing the parent process</a></li><li><a href="#Lifetime-of-the-parent-process-and-pseudo-processes">Lifetime of the parent process and pseudo-processes</a></li></ul><li><a href="#CAVEATS-AND-LIMITATIONS">CAVEATS AND LIMITATIONS</a></li><li><a href="#PORTABILITY-CAVEATS">PORTABILITY CAVEATS</a></li><li><a href="#BUGS">BUGS</a></li><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.16.1/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.1/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.16.1/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
