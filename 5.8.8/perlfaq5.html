      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlfaq5 - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlfaq5 - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlfaq5.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.8.8/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.8.8/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.8.8/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.8.8/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.8.8/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.8.8/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-faq.html">FAQs</a> &gt;
      
    
    perlfaq5
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 8.8
                        documentation</h7>
                    </div>
                    <h1>perlfaq5</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#How-do-I-flush%2funbuffer-an-output-filehandle%3f--Why-must-I-do-this%3f">How do I flush/unbuffer an output filehandle?  Why must I do this?
   </a></li><li><a href="#How-do-I-change-one-line-in-a-file%2fdelete-a-line-in-a-file%2finsert-a-line-in-the-middle-of-a-file%2fappend-to-the-beginning-of-a-file%3f">How do I change one line in a file/delete a line in a file/insert a line in the middle of a file/append to the beginning of a file?
</a></li><li><a href="#How-do-I-count-the-number-of-lines-in-a-file%3f">How do I count the number of lines in a file?
  </a></li><li><a href="#How-can-I-use-Perl's--i-option-from-within-a-program%3f">How can I use Perl's -i option from within a program?
 </a></li><li><a href="#How-can-I-copy-a-file%3f">How can I copy a file?
 </a></li><li><a href="#How-do-I-make-a-temporary-file-name%3f">How do I make a temporary file name?
</a></li><li><a href="#How-can-I-manipulate-fixed-record-length-files%3f">How can I manipulate fixed-record-length files?
 </a></li><li><a href="#How-can-I-make-a-filehandle-local-to-a-subroutine%3f--How-do-I-pass-filehandles-between-subroutines%3f--How-do-I-make-an-array-of-filehandles%3f">How can I make a filehandle local to a subroutine?  How do I pass filehandles between subroutines?  How do I make an array of filehandles?
  </a></li><li><a href="#How-can-I-use-a-filehandle-indirectly%3f">How can I use a filehandle indirectly?
</a></li><li><a href="#How-can-I-set-up-a-footer-format-to-be-used-with-write()%3f">How can I set up a footer format to be used with write()?
</a></li><li><a href="#How-can-I-write()-into-a-string%3f">How can I write() into a string?
</a></li><li><a href="#How-can-I-output-my-numbers-with-commas-added%3f">How can I output my numbers with commas added?
</a></li><li><a href="#How-can-I-translate-tildes-(~)-in-a-filename%3f">How can I translate tildes (~) in a filename?
 </a></li><li><a href="#How-come-when-I-open-a-file-read-write-it-wipes-it-out%3f">How come when I open a file read-write it wipes it out?
    </a></li><li><a href="#Why-do-I-sometimes-get-an-%22Argument-list-too-long%22-when-I-use-%3c*%3e%3f">Why do I sometimes get an "Argument list too long" when I use <*>?
</a></li><li><a href="#Is-there-a-leak%2fbug-in-glob()%3f">Is there a leak/bug in glob()?
</a></li><li><a href="#How-can-I-open-a-file-with-a-leading-%22%3e%22-or-trailing-blanks%3f">How can I open a file with a leading ">" or trailing blanks?
</a></li><li><a href="#How-can-I-reliably-rename-a-file%3f">How can I reliably rename a file?
    </a></li><li><a href="#How-can-I-lock-a-file%3f">How can I lock a file?
  </a></li><li><a href="#Why-can't-I-just-open(FH%2c-%22%3efile.lock%22)%3f">Why can't I just open(FH, ">file.lock")?
</a></li><li><a href="#I-still-don't-get-locking.--I-just-want-to-increment-the-number-in-the-file.--How-can-I-do-this%3f">I still don't get locking.  I just want to increment the number in the file.  How can I do this?
 </a></li><li><a href="#All-I-want-to-do-is-append-a-small-amount-of-text-to-the-end-of-a-file.--Do-I-still-have-to-use-locking%3f">All I want to do is append a small amount of text to the end of a file.  Do I still have to use locking?
 </a></li><li><a href="#How-do-I-randomly-update-a-binary-file%3f">How do I randomly update a binary file?
</a></li><li><a href="#How-do-I-get-a-file's-timestamp-in-perl%3f">How do I get a file's timestamp in perl?
 </a></li><li><a href="#How-do-I-set-a-file's-timestamp-in-perl%3f">How do I set a file's timestamp in perl?
 </a></li><li><a href="#How-do-I-print-to-more-than-one-file-at-once%3f">How do I print to more than one file at once?
</a></li><li><a href="#How-can-I-read-in-an-entire-file-all-at-once%3f">How can I read in an entire file all at once?
 </a></li><li><a href="#How-can-I-read-in-a-file-by-paragraphs%3f">How can I read in a file by paragraphs?
</a></li><li><a href="#How-can-I-read-a-single-character-from-a-file%3f--From-the-keyboard%3f">How can I read a single character from a file?  From the keyboard?
 </a></li><li><a href="#How-can-I-tell-whether-there's-a-character-waiting-on-a-filehandle%3f">How can I tell whether there's a character waiting on a filehandle?</a></li><li><a href="#How-do-I-do-a-tail--f-in-perl%3f">How do I do a tail -f in perl?
</a></li><li><a href="#How-do-I-dup()-a-filehandle-in-Perl%3f">How do I dup() a filehandle in Perl?
</a></li><li><a href="#How-do-I-close-a-file-descriptor-by-number%3f">How do I close a file descriptor by number?
</a></li><li><a href="#Why-can't-I-use-%22C%3a%5ctemp%5cfoo%22-in-DOS-paths%3f--Why-doesn't-%60C%3a%5ctemp%5cfoo.exe%60-work%3f">Why can't I use "C:\temp\foo" in DOS paths?  Why doesn't `C:\temp\foo.exe` work?
</a></li><li><a href="#Why-doesn't-glob(%22*.*%22)-get-all-the-files%3f">Why doesn't glob("*.*") get all the files?
</a></li><li><a href="#Why-does-Perl-let-me-delete-read-only-files%3f--Why-does--i-clobber-protected-files%3f--Isn't-this-a-bug-in-Perl%3f">Why does Perl let me delete read-only files?  Why does -i clobber protected files?  Isn't this a bug in Perl?</a></li><li><a href="#How-do-I-select-a-random-line-from-a-file%3f">How do I select a random line from a file?
</a></li><li><a href="#Why-do-I-get-weird-spaces-when-I-print-an-array-of-lines%3f">Why do I get weird spaces when I print an array of lines?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlfaq5 - Files and Formats ($Revision: 1.42 $, $Date: 2005/12/31 00:54:37 $)</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This section deals with I/O and the "f" issues: filehandles, flushing,
formats, and footers.</p>
<a class='view-head2' id="How-do-I-flush%2funbuffer-an-output-filehandle%3f--Why-must-I-do-this%3f"></a><h3 class='h3' >How do I flush/unbuffer an output filehandle?  Why must I do this?
   </h3>
<p>Perl does not support truly unbuffered output (except
insofar as you can <code class="inline"><a class="l_k" href="functions/syswrite.html">syswrite</a><span class="s">(</span><span class="w">OUT</span><span class="cm">,</span> <span class="i">$char</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span></code>
), although it
does support is "command buffering", in which a physical
write is performed after every output command.</p>
<p>The C standard I/O library (stdio) normally buffers
characters sent to devices so that there isn't a system call
for each byte. In most stdio implementations, the type of
output buffering and the size of the buffer varies according
to the type of device. Perl's print() and write() functions
normally buffer output, while syswrite() bypasses buffering
all together.</p>
<p>If you want your output to be sent immediately when you
execute print() or write() (for instance, for some network
protocols), you must set the handle's autoflush flag. This
flag is the Perl variable $| and when it is set to a true
value, Perl will flush the handle's buffer after each
print() or write(). Setting $| affects buffering only for
the currently selected default file handle. You choose this
handle with the one argument select() call (see
<i>perlvar/$</i> and <a class='function-name' href="functions/select.html">select</a>).</p>
<p>Use select() to choose the desired handle, then set its
per-filehandle variables.</p>
<pre class="verbatim"><ol><li>    <span class="i">$old_fh</span> = <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="w">OUTPUT_HANDLE</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$|</span> = <span class="n">1</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="i">$old_fh</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Some idioms can handle this in a single statement:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="s">(</span><a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="w">OUTPUT_HANDLE</span><span class="s">)</span><span class="cm">,</span> <span class="i">$|</span> = <span class="n">1</span><span class="s">)</span>[<span class="n">0</span>]<span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="i">$|</span> = <span class="n">1</span><span class="cm">,</span> <a class="l_k" href="functions/select.html">select</a> <span class="i">$_</span> for <a class="l_k" href="functions/select.html">select</a> <span class="w">OUTPUT_HANDLE</span><span class="sc">;</span></li></ol></pre><p>Some modules offer object-oriented access to handles and their
variables, although they may be overkill if this is the only
thing you do with them.  You can use IO::Handle:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Handle</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">DEV</span><span class="cm">,</span> <span class="q">&quot;&gt;/dev/printer&quot;</span><span class="s">)</span><span class="sc">;</span>   <span class="c"># but is this?</span></li><li>    <span class="w">DEV</span><span class="w">-&gt;autoflush</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>or IO::Socket:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Socket</span><span class="sc">;</span>		  <span class="c"># this one is kinda a pipe?</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$sock</span> = <span class="w">IO::Socket::INET</span><span class="w">-&gt;new</span><span class="s">(</span> <span class="q">&#39;www.example.com:80&#39;</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>    <span class="i">$sock</span><span class="i">-&gt;autoflush</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-do-I-change-one-line-in-a-file%2fdelete-a-line-in-a-file%2finsert-a-line-in-the-middle-of-a-file%2fappend-to-the-beginning-of-a-file%3f"></a><h3 class='h3' >How do I change one line in a file/delete a line in a file/insert a line in the middle of a file/append to the beginning of a file?
</h3>
<p>Use the Tie::File module, which is included in the standard
distribution since Perl 5.8.0.</p>
<a class='view-head2' id="How-do-I-count-the-number-of-lines-in-a-file%3f"></a><h3 class='h3' >How do I count the number of lines in a file?
  </h3>
<p>One fairly efficient way is to count newlines in the file. The
following program uses a feature of tr///, as documented in <a href="perlop.html">perlop</a>.
If your text file doesn't end with a newline, then it's not really a
proper text file, so this may report one fewer line than you expect.</p>
<pre class="verbatim"><ol><li>    <span class="i">$lines</span> = <span class="n">0</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FILE</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Can&#39;t open `$filename&#39;: $!&quot;</span><span class="sc">;</span></li><li>    while <span class="s">(</span><a class="l_k" href="functions/sysread.html">sysread</a> <span class="w">FILE</span><span class="cm">,</span> <span class="i">$buffer</span><span class="cm">,</span> <span class="n">4096</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">$lines</span> += <span class="s">(</span><span class="i">$buffer</span> =~ <span class="q">tr/\n//</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/close.html">close</a> <span class="w">FILE</span><span class="sc">;</span></li></ol></pre><p>This assumes no funny games with newline translations.</p>
<a class='view-head2' id="How-can-I-use-Perl's--i-option-from-within-a-program%3f"></a><h3 class='h3' >How can I use Perl's <code class="inline">-<span class="w">i</span></code>
 option from within a program?
 </h3>
<p><code class="inline">-<span class="w">i</span></code>
 sets the value of Perl's <code class="inline"><span class="i">$^I</span></code>
 variable, which in turn affects
the behavior of <code class="inline">&lt;&gt;</code>
; see <a href="perlrun.html">perlrun</a> for more details.  By
modifying the appropriate variables directly, you can get the same
behavior within a larger program.  For example:</p>
<pre class="verbatim"><ol><li>     <span class="c"># ...</span></li><li>     <span class="s">{</span></li><li>        <a class="l_k" href="functions/local.html">local</a><span class="s">(</span><span class="i">$^I</span><span class="cm">,</span> <span class="i">@ARGV</span><span class="s">)</span> = <span class="s">(</span><span class="q">&#39;.orig&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/glob.html">glob</a><span class="s">(</span><span class="q">&quot;*.c&quot;</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>        while <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span></li><li>           if <span class="s">(</span><span class="i">$.</span> == <span class="n">1</span><span class="s">)</span> <span class="s">{</span></li><li>               <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;This line should appear at the top of each file\n&quot;</span><span class="sc">;</span></li><li>           <span class="s">}</span></li><li>           <span class="q">s/\b(p)earl\b/${1}erl/i</span><span class="sc">;</span>        <span class="c"># Correct typos, preserving case</span></li><li>           <a class="l_k" href="functions/print.html">print</a><span class="sc">;</span></li><li>           <a class="l_k" href="functions/close.html">close</a> <span class="w">ARGV</span> if <a class="l_k" href="functions/eof.html">eof</a><span class="sc">;</span>              <span class="c"># Reset $.</span></li><li>        <span class="s">}</span></li><li>     <span class="s">}</span></li><li>     <span class="c"># $^I and @ARGV return to their old values here</span></li></ol></pre><p>This block modifies all the <code class="inline">.<span class="w">c</span></code>
 files in the current directory,
leaving a backup of the original data from each file in a new
<code class="inline">.<span class="w">c</span>.<span class="w">orig</span></code>
 file.</p>
<a class='view-head2' id="How-can-I-copy-a-file%3f"></a><h3 class='h3' >How can I copy a file?
 </h3>
<p>(contributed by brian d foy)</p>
<p>Use the File::Copy module. It comes with Perl and can do a
true copy across file systems, and it does its magic in
a portable fashion.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">File::Copy</span><span class="sc">;</span></li><li></li><li>	<span class="i">copy</span><span class="s">(</span> <span class="i">$original</span><span class="cm">,</span> <span class="i">$new_copy</span> <span class="s">)</span> or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Copy failed: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>If you can't use File::Copy, you'll have to do the work yourself:
open the original file, open the destination file, then print
to the destination file as you read the original.</p>
<a class='view-head2' id="How-do-I-make-a-temporary-file-name%3f"></a><h3 class='h3' >How do I make a temporary file name?
</h3>
<p>If you don't need to know the name of the file, you can use <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code>
with <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> in place of the file name.  The <code class="inline"><a class="l_k" href="functions/open.html">open()</a></code> function
creates an anonymous temporary file.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$tmp</span><span class="cm">,</span> <span class="q">&#39;+&gt;&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/undef.html">undef</a> or <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>Otherwise, you can use the File::Temp module.</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">File::Temp</span> <span class="q">qw/ tempfile tempdir /</span><span class="sc">;</span></li><li></li><li>  <span class="i">$dir</span> = <span class="i">tempdir</span><span class="s">(</span> <span class="w">CLEANUP</span> <span class="cm">=&gt;</span> <span class="n">1</span> <span class="s">)</span><span class="sc">;</span></li><li>  <span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="c"># or if you don&#39;t need to know the filename</span></li><li></li><li>  <span class="i">$fh</span> = <span class="i">tempfile</span><span class="s">(</span> <span class="w">DIR</span> <span class="cm">=&gt;</span> <span class="i">$dir</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The File::Temp has been a standard module since Perl 5.6.1.  If you
don't have a modern enough Perl installed, use the <code class="inline"><span class="w">new_tmpfile</span></code>

class method from the IO::File module to get a filehandle opened for
reading and writing.  Use it if you don't need to know the file's name:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::File</span><span class="sc">;</span></li><li>    <span class="i">$fh</span> = <span class="w">IO::File</span><span class="w">-&gt;new_tmpfile</span><span class="s">(</span><span class="s">)</span></li><li>	or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Unable to make new temporary file: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>If you're committed to creating a temporary file by hand, use the
process ID and/or the current time-value.  If you need to have many
temporary files in one process, use a counter:</p>
<pre class="verbatim"><ol><li>    BEGIN <span class="s">{</span></li><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">Fcntl</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$temp_dir</span> = -d <span class="q">&#39;/tmp&#39;</span> ? <span class="q">&#39;/tmp&#39;</span> <span class="co">:</span> <span class="i">$ENV</span>{<span class="w">TMPDIR</span>} || <span class="i">$ENV</span>{<span class="w">TEMP</span>}<span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$base_name</span> = <a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%s/%d-%d-0000&quot;</span><span class="cm">,</span> <span class="i">$temp_dir</span><span class="cm">,</span> <span class="i">$$</span><span class="cm">,</span> <a class="l_k" href="functions/time.html">time</a><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li><a name="temp_file"></a>	sub <span class="m">temp_file</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/local.html">local</a> <span class="i">*FH</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/my.html">my</a> <span class="i">$count</span> = <span class="n">0</span><span class="sc">;</span></li><li>	    until <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">FH</span><span class="s">)</span><span class="s">)</span> || <span class="i">$count</span>++ &gt; <span class="n">100</span><span class="s">)</span> <span class="s">{</span></li><li>		<span class="i">$base_name</span> =~ <span class="q">s/-(\d+)$/&quot;-&quot; . (1 + $1)/e</span><span class="sc">;</span></li><li>		<span class="c"># O_EXCL is required for security reasons.</span></li><li>		<a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$base_name</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="s">}</span></li><li>	    if <span class="s">(</span><a class="l_k" href="functions/defined.html">defined</a><span class="s">(</span><a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">FH</span><span class="s">)</span><span class="s">)</span></li><li>		<a class="l_k" href="functions/return.html">return</a> <span class="s">(</span><span class="i">*FH</span><span class="cm">,</span> <span class="i">$base_name</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="s">}</span> else <span class="s">{</span></li><li>		<a class="l_k" href="functions/return.html">return</a> <span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="s">}</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-manipulate-fixed-record-length-files%3f"></a><h3 class='h3' >How can I manipulate fixed-record-length files?
 </h3>
<p>The most efficient way is using <a class='function-name' href="functions/pack.html">pack</a> and
<a class='function-name' href="functions/unpack.html">unpack</a>.  This is faster than using
<a class='function-name' href="functions/substr.html">substr</a> when taking many, many strings.  It is
slower for just a few.</p>
<p>Here is a sample chunk of code to break up and put back together again
some fixed-format input lines, in this case from the output of a normal,
Berkeley-style ps:</p>
<pre class="verbatim"><ol><li>    <span class="c"># sample input line:</span></li><li>    <span class="c">#   15158 p5  T      0:00 perl /home/tchrist/scripts/now-what</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$PS_T</span> = <span class="q">&#39;A6 A4 A7 A5 A*&#39;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$ps</span><span class="cm">,</span> <span class="q">&#39;-|&#39;</span><span class="cm">,</span> <span class="q">&#39;ps&#39;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <a class="l_k" href="functions/scalar.html">scalar</a> <span class="q">&lt;$ps&gt;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">@fields</span> = <span class="q">qw( pid tt stat time command )</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="q">&lt;$ps&gt;</span><span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">%process</span><span class="sc">;</span></li><li>        <span class="i">@process</span>{<span class="i">@fields</span>} = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="i">$PS_T</span><span class="cm">,</span> <span class="i">$_</span><span class="s">)</span><span class="sc">;</span></li><li>	for <a class="l_k" href="functions/my.html">my</a> <span class="i">$field</span> <span class="s">(</span> <span class="i">@fields</span> <span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$field: &lt;$process{$field}&gt;\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&#39;line=&#39;</span><span class="cm">,</span> <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="i">$PS_T</span><span class="cm">,</span> <span class="i">@process</span>{<span class="i">@fields</span>} <span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>We've used a hash slice in order to easily handle the fields of each row.
Storing the keys in an array means it's easy to operate on them as a
group or loop over them with for. It also avoids polluting the program
with global variables and using symbolic references.</p>
<a class='view-head2' id="How-can-I-make-a-filehandle-local-to-a-subroutine%3f--How-do-I-pass-filehandles-between-subroutines%3f--How-do-I-make-an-array-of-filehandles%3f"></a><h3 class='h3' >How can I make a filehandle local to a subroutine?  How do I pass filehandles between subroutines?  How do I make an array of filehandles?
  </h3>
<p>As of perl5.6, open() autovivifies file and directory handles
as references if you pass it an uninitialized scalar variable.
You can then pass these references just like any other scalar,
and use them in the place of named handles.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a>    <span class="i">$fh</span><span class="cm">,</span> <span class="i">$file_name</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/local.html">local</a> <span class="i">$fh</span><span class="cm">,</span> <span class="i">$file_name</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">$fh</span> <span class="q">&quot;Hello World!\n&quot;</span><span class="sc">;</span></li><li></li><li>	<span class="i">process_file</span><span class="s">(</span> <span class="i">$fh</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Before perl5.6, you had to deal with various typeglob idioms
which you may see in older code.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/open.html">open</a> <span class="w">FILE</span><span class="cm">,</span> <span class="q">&quot;&gt; $filename&quot;</span><span class="sc">;</span></li><li>	<span class="i">process_typeglob</span><span class="s">(</span>   <span class="i">*FILE</span> <span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">process_reference</span><span class="s">(</span> \<span class="i">*FILE</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li><a name="process_typeglob"></a>	sub <span class="m">process_typeglob</span>  <span class="s">{</span> <a class="l_k" href="functions/local.html">local</a> <span class="i">*FH</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span>  <span class="q">&quot;Typeglob!&quot;</span> <span class="s">}</span></li><li><a name="process_reference"></a>	sub <span class="m">process_reference</span> <span class="s">{</span> <a class="l_k" href="functions/local.html">local</a> <span class="i">$fh</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">$fh</span> <span class="q">&quot;Reference!&quot;</span> <span class="s">}</span></li></ol></pre><p>If you want to create many anonymous handles, you should
check out the Symbol or IO::Handle modules.</p>
<a class='view-head2' id="How-can-I-use-a-filehandle-indirectly%3f"></a><h3 class='h3' >How can I use a filehandle indirectly?
</h3>
<p>An indirect filehandle is using something other than a symbol
in a place that a filehandle is expected.  Here are ways
to get indirect filehandles:</p>
<pre class="verbatim"><ol><li>    <span class="i">$fh</span> =   <span class="w">SOME_FH</span><span class="sc">;</span>       <span class="c"># bareword is strict-subs hostile</span></li><li>    <span class="i">$fh</span> =  <span class="q">&quot;SOME_FH&quot;</span><span class="sc">;</span>      <span class="c"># strict-refs hostile; same package only</span></li><li>    <span class="i">$fh</span> =  <span class="i">*SOME_FH</span><span class="sc">;</span>       <span class="c"># typeglob</span></li><li>    <span class="i">$fh</span> = \<span class="i">*SOME_FH</span><span class="sc">;</span>       <span class="c"># ref to typeglob (bless-able)</span></li><li>    <span class="i">$fh</span> =  <span class="i">*SOME_FH</span>{<span class="w">IO</span>}<span class="sc">;</span>   <span class="c"># blessed IO::Handle from *SOME_FH typeglob</span></li></ol></pre><p>Or, you can use the <code class="inline"><span class="w">new</span></code>
 method from one of the IO::* modules to
create an anonymous filehandle, store that in a scalar variable,
and use it as though it were a normal filehandle.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Handle</span><span class="sc">;</span>                     <span class="c"># 5.004 or higher</span></li><li>    <span class="i">$fh</span> = <span class="w">IO::Handle</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Then use any of those as you would a normal filehandle.  Anywhere that
Perl is expecting a filehandle, an indirect filehandle may be used
instead. An indirect filehandle is just a scalar variable that contains
a filehandle.  Functions like <code class="inline"><a class="l_k" href="functions/print.html">print</a></code>, <code class="inline"><a class="l_k" href="functions/open.html">open</a></code>, <code class="inline"><a class="l_k" href="functions/seek.html">seek</a></code>, or
the <code class="inline"><span class="q">&lt;FH&gt;</span></code>
 diamond operator will accept either a named filehandle
or a scalar variable containing one:</p>
<pre class="verbatim"><ol><li>    <span class="s">(</span><span class="i">$ifh</span><span class="cm">,</span> <span class="i">$ofh</span><span class="cm">,</span> <span class="i">$efh</span><span class="s">)</span> = <span class="s">(</span><span class="i">*STDIN</span><span class="cm">,</span> <span class="i">*STDOUT</span><span class="cm">,</span> <span class="i">*STDERR</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$ofh</span> <span class="q">&quot;Type it: &quot;</span><span class="sc">;</span></li><li>    <span class="i">$got</span> = <span class="q">&lt;$ifh&gt;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$efh</span> <span class="q">&quot;What was that: $got&quot;</span><span class="sc">;</span></li></ol></pre><p>If you're passing a filehandle to a function, you can write
the function in two ways:</p>
<pre class="verbatim"><ol><li><a name="accept_fh"></a>    sub <span class="m">accept_fh</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a> <span class="i">$fh</span> <span class="q">&quot;Sending to indirect filehandle\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Or it can localize a typeglob and use the filehandle directly:</p>
<pre class="verbatim"><ol><li><a name="accept_fh"></a>    sub <span class="m">accept_fh</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/local.html">local</a> <span class="i">*FH</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>        <a class="l_k" href="functions/print.html">print</a>  <span class="i">FH</span> <span class="q">&quot;Sending to localized filehandle\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Both styles work with either objects or typeglobs of real filehandles.
(They might also work with strings under some circumstances, but this
is risky.)</p>
<pre class="verbatim"><ol><li>    <span class="i">accept_fh</span><span class="s">(</span><span class="i">*STDOUT</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">accept_fh</span><span class="s">(</span><span class="i">$handle</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>In the examples above, we assigned the filehandle to a scalar variable
before using it.  That is because only simple scalar variables, not
expressions or subscripts of hashes or arrays, can be used with
built-ins like <code class="inline"><a class="l_k" href="functions/print.html">print</a></code>, <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code>, or the diamond operator.  Using
something other than a simple scalar variable as a filehandle is
illegal and won't even compile:</p>
<pre class="verbatim"><ol><li>    <span class="i">@fd</span> = <span class="s">(</span><span class="i">*STDIN</span><span class="cm">,</span> <span class="i">*STDOUT</span><span class="cm">,</span> <span class="i">*STDERR</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$fd</span>[<span class="n">1</span>] <span class="q">&quot;Type it: &quot;</span><span class="sc">;</span>                           <span class="c"># WRONG</span></li><li>    <span class="i">$got</span> = <span class="q">&lt;$fd[0]&gt;</span>                                     <span class="c"># WRONG</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">$fd</span>[<span class="n">2</span>] <span class="q">&quot;What was that: $got&quot;</span><span class="sc">;</span>                 <span class="c"># WRONG</span></li></ol></pre><p>With <code class="inline"><a class="l_k" href="functions/print.html">print</a></code> and <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code>, you get around this by using a block and
an expression where you would place the filehandle:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a>  <span class="s">{</span> <span class="i">$fd</span>[<span class="n">1</span>] <span class="s">}</span> <span class="q">&quot;funny stuff\n&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="s">{</span> <span class="i">$fd</span>[<span class="n">1</span>] <span class="s">}</span> <span class="q">&quot;Pity the poor %x.\n&quot;</span><span class="cm">,</span> <span class="n">3_735_928_559</span><span class="sc">;</span></li><li>    <span class="c"># Pity the poor deadbeef.</span></li></ol></pre><p>That block is a proper block like any other, so you can put more
complicated code there.  This sends the message out to one of two places:</p>
<pre class="verbatim"><ol><li>    <span class="i">$ok</span> = -x <span class="q">&quot;/bin/cat&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="s">{</span> <span class="i">$ok</span> ? <span class="i">$fd</span>[<span class="n">1</span>] <span class="co">:</span> <span class="i">$fd</span>[<span class="n">2</span>] <span class="s">}</span> <span class="q">&quot;cat stat $ok\n&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="s">{</span> <span class="i">$fd</span>[ <span class="n">1</span>+ <span class="s">(</span><span class="i">$ok</span> || <span class="n">0</span><span class="s">)</span> ]  <span class="s">}</span> <span class="q">&quot;cat stat $ok\n&quot;</span><span class="sc">;</span></li></ol></pre><p>This approach of treating <code class="inline"><a class="l_k" href="functions/print.html">print</a></code> and <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code> like object methods
calls doesn't work for the diamond operator.  That's because it's a
real operator, not just a function with a comma-less argument.  Assuming
you've been storing typeglobs in your structure as we did above, you
can use the built-in function named <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> to read a record just
as <code class="inline">&lt;&gt;</code>
 does.  Given the initialization shown above for @fd, this
would work, but only because readline() requires a typeglob.  It doesn't
work with objects or strings, which might be a bug we haven't fixed yet.</p>
<pre class="verbatim"><ol><li>    <span class="i">$got</span> = <a class="l_k" href="functions/readline.html">readline</a><span class="s">(</span><span class="i">$fd</span>[<span class="n">0</span>]<span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Let it be noted that the flakiness of indirect filehandles is not
related to whether they're strings, typeglobs, objects, or anything else.
It's the syntax of the fundamental operators.  Playing the object
game doesn't help you at all here.</p>
<a class='view-head2' id="How-can-I-set-up-a-footer-format-to-be-used-with-write()%3f"></a><h3 class='h3' >How can I set up a footer format to be used with write()?
</h3>
<p>There's no builtin way to do this, but <a href="perlform.html">perlform</a> has a couple of
techniques to make it possible for the intrepid hacker.</p>
<a class='view-head2' id="How-can-I-write()-into-a-string%3f"></a><h3 class='h3' >How can I write() into a string?
</h3>
<p>See <a href="perlform.html#Accessing-Formatting-Internals">Accessing Formatting Internals in perlform</a> for an swrite() function.</p>
<a class='view-head2' id="How-can-I-output-my-numbers-with-commas-added%3f"></a><h3 class='h3' >How can I output my numbers with commas added?
</h3>
<p>(contributed by brian d foy and Benjamin Goldberg)</p>
<p>You can use <a href="https://search.cpan.org/perldoc/Number::Format">Number::Format</a> to separate places in a number.
It handles locale information for those of you who want to insert
full stops instead (or anything else that they want to use,
really).</p>
<p>This subroutine will add commas to your number:</p>
<pre class="verbatim"><ol><li><a name="commify"></a>	sub <span class="m">commify</span> <span class="s">{</span></li><li>	   <a class="l_k" href="functions/local.html">local</a> <span class="i">$_</span>  = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	   <span class="n">1</span> while <span class="q">s/^([-+]?\d+)(\d{3})/$1,$2/</span><span class="sc">;</span></li><li>	   <a class="l_k" href="functions/return.html">return</a> <span class="i">$_</span><span class="sc">;</span></li><li>	   <span class="s">}</span></li></ol></pre><p>This regex from Benjamin Goldberg will add commas to numbers:</p>
<pre class="verbatim"><ol><li>   <span class="q">s/(^[-+]?\d+?(?=(?&gt;(?:\d{3})+)(?!\d))|\G\d{3}(?=\d))/$1,/g</span><span class="sc">;</span></li></ol></pre><p>It is easier to see with comments:</p>
<pre class="verbatim"><ol><li>   <span class="q">s/(</span></li><li>       <span class="q">       ^[-+]?            # beginning of number.</span></li><li>       <span class="q">       \d+?              # first digits before first comma</span></li><li>       <span class="q">       (?=               # followed by, (but not included in the match) :</span></li><li>          <span class="q">          (?&gt;(?:\d{3})+) # some positive multiple of three digits.</span></li><li>          <span class="q">          (?!\d)         # an *exact* multiple, not x * 3 + 1 or whatever.</span></li><li>       <span class="q">       )</span></li><li>      <span class="q">      |                  # or:</span></li><li>       <span class="q">       \G\d{3}           # after the last group, get three digits</span></li><li>       <span class="q">       (?=\d)            # but they have to have more digits after them.</span></li><li>   <span class="q">   )/$1,/xg</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-translate-tildes-(~)-in-a-filename%3f"></a><h3 class='h3' >How can I translate tildes (~) in a filename?
 </h3>
<p>Use the &lt;&gt; (glob()) operator, documented in <a href="perlfunc.html">perlfunc</a>.  Older
versions of Perl require that you have a shell installed that groks
tildes.  Recent perl versions have this feature built in. The
File::KGlob module (available from CPAN) gives more portable glob
functionality.</p>
<p>Within Perl, you may use this directly:</p>
<pre class="verbatim"><ol><li>	<span class="i">$filename</span> =~ <span class="q">s{</span></li><li>	  <span class="q">	  ^ ~             # find a leading tilde</span></li><li>	  <span class="q">	  (               # save this in $1</span></li><li>	      <span class="q">	      [^/]        # a non-slash character</span></li><li>	            <span class="q">	            *     # repeated 0 or more times (0 means me)</span></li><li>	  <span class="q">	  )</span></li><li>	<span class="q">	}{</span></li><li>	  <span class="q">	  $1</span></li><li>	      <span class="q">	      ? (getpwnam($1))[7]</span></li><li>	      <span class="q">	      : ( $ENV{HOME} || $ENV{LOGDIR} )</span></li><li>	<span class="q">	}ex</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-come-when-I-open-a-file-read-write-it-wipes-it-out%3f"></a><h3 class='h3' >How come when I open a file read-write it wipes it out?
    </h3>
<p>Because you're using something like this, which truncates the file and
<i>then</i> gives you read-write access:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;+&gt; /path/name&quot;</span><span class="s">)</span><span class="sc">;</span>		<span class="c"># WRONG (almost always)</span></li></ol></pre><p>Whoops.  You should instead use this, which will fail if the file
doesn't exist.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;+&lt; /path/name&quot;</span><span class="s">)</span><span class="sc">;</span>  	<span class="c"># open for update</span></li></ol></pre><p>Using "&gt;" always clobbers or creates.  Using "&lt;" never does
either.  The "+" doesn't change this.</p>
<p>Here are examples of many kinds of file opens.  Those using sysopen()
all assume</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Fcntl</span><span class="sc">;</span></li></ol></pre><p>To open file for reading:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;&lt; $path&quot;</span><span class="s">)</span>                                 || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDONLY</span><span class="s">)</span>                        || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for writing, create new file if needed or else truncate old file:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;&gt; $path&quot;</span><span class="s">)</span> || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_TRUNC</span>|<span class="w">O_CREAT</span><span class="s">)</span>        || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_TRUNC</span>|<span class="w">O_CREAT</span><span class="cm">,</span> <span class="n">0666</span><span class="s">)</span>  || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for writing, create new file, file must not exist:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="s">)</span>         || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="cm">,</span> <span class="n">0666</span><span class="s">)</span>   || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for appending, create if necessary:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;&gt;&gt; $path&quot;</span><span class="s">)</span> || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_APPEND</span>|<span class="w">O_CREAT</span><span class="s">)</span>       || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_APPEND</span>|<span class="w">O_CREAT</span><span class="cm">,</span> <span class="n">0666</span><span class="s">)</span> || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for appending, file must exist:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_APPEND</span><span class="s">)</span>               || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for update, file must exist:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;+&lt; $path&quot;</span><span class="s">)</span>                                || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDWR</span><span class="s">)</span>                          || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for update, create file if necessary:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDWR</span>|<span class="w">O_CREAT</span><span class="s">)</span>                  || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDWR</span>|<span class="w">O_CREAT</span><span class="cm">,</span> <span class="n">0666</span><span class="s">)</span>            || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open file for update, file must not exist:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDWR</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="s">)</span>           || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> <span class="w">O_RDWR</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="cm">,</span> <span class="n">0666</span><span class="s">)</span>     || <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></li></ol></pre><p>To open a file without blocking, creating if necessary:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;/foo/somefile&quot;</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_NDELAY</span>|<span class="w">O_CREAT</span><span class="s">)</span></li><li>	    or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t open /foo/somefile: $!&quot;</span><span class="co">:</span></li></ol></pre><p>Be warned that neither creation nor deletion of files is guaranteed to
be an atomic operation over NFS.  That is, two processes might both
successfully create or unlink the same file!  Therefore O_EXCL
isn't as exclusive as you might wish.</p>
<p>See also the new <a href="perlopentut.html">perlopentut</a> if you have it (new for 5.6).</p>
<a class='view-head2' id="Why-do-I-sometimes-get-an-%22Argument-list-too-long%22-when-I-use-%3c*%3e%3f"></a><h3 class='h3' >Why do I sometimes get an "Argument list too long" when I use &lt;*&gt;?
</h3>
<p>The <code class="inline">&lt;&gt;</code>
 operator performs a globbing operation (see above).
In Perl versions earlier than v5.6.0, the internal glob() operator forks
csh(1) to do the actual glob expansion, but
csh can't handle more than 127 items and so gives the error message
<code class="inline"><span class="w">Argument</span> <span class="w">list</span> <span class="w">too</span> <span class="w">long</span></code>
.  People who installed tcsh as csh won't
have this problem, but their users may be surprised by it.</p>
<p>To get around this, either upgrade to Perl v5.6.0 or later, do the glob
yourself with readdir() and patterns, or use a module like File::KGlob,
one that doesn't use the shell to do globbing.</p>
<a class='view-head2' id="Is-there-a-leak%2fbug-in-glob()%3f"></a><h3 class='h3' >Is there a leak/bug in glob()?
</h3>
<p>Due to the current implementation on some operating systems, when you
use the glob() function or its angle-bracket alias in a scalar
context, you may cause a memory leak and/or unpredictable behavior.  It's
best therefore to use glob() only in list context.</p>
<a class='view-head2' id="How-can-I-open-a-file-with-a-leading-%22%3e%22-or-trailing-blanks%3f"></a><h3 class='h3' >How can I open a file with a leading "&gt;" or trailing blanks?
</h3>
<p>(contributed by Brian McCauley)</p>
<p>The special two argument form of Perl's open() function ignores
trailing blanks in filenames and infers the mode from certain leading
characters (or a trailing "|"). In older versions of Perl this was the
only version of open() and so it is prevalent in old code and books.</p>
<p>Unless you have a particular reason to use the two argument form you
should use the three argument form of open() which does not treat any
charcters in the filename as special.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/open.html">open</a> <span class="w">FILE</span><span class="cm">,</span> <span class="q">&quot;&lt;&quot;</span><span class="cm">,</span> <span class="q">&quot;  file  &quot;</span><span class="sc">;</span>  <span class="c"># filename is &quot;   file   &quot;</span></li><li>	<a class="l_k" href="functions/open.html">open</a> <span class="w">FILE</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> <span class="q">&quot;&gt;file&quot;</span><span class="sc">;</span>     <span class="c"># filename is &quot;&gt;file&quot;</span></li></ol></pre><a class='view-head2' id="How-can-I-reliably-rename-a-file%3f"></a><h3 class='h3' >How can I reliably rename a file?
    </h3>
<p>If your operating system supports a proper mv(1) utility or its
functional equivalent, this works:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/rename.html">rename</a><span class="s">(</span><span class="i">$old</span><span class="cm">,</span> <span class="i">$new</span><span class="s">)</span> or <a class="l_k" href="functions/system.html">system</a><span class="s">(</span><span class="q">&quot;mv&quot;</span><span class="cm">,</span> <span class="i">$old</span><span class="cm">,</span> <span class="i">$new</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>It may be more portable to use the File::Copy module instead.
You just copy to the new file to the new name (checking return
values), then delete the old one.  This isn't really the same
semantically as a rename(), which preserves meta-information like
permissions, timestamps, inode info, etc.</p>
<p>Newer versions of File::Copy export a move() function.</p>
<a class='view-head2' id="How-can-I-lock-a-file%3f"></a><h3 class='h3' >How can I lock a file?
  </h3>
<p>Perl's builtin flock() function (see <a href="perlfunc.html">perlfunc</a> for details) will call
flock(2) if that exists, fcntl(2) if it doesn't (on perl version 5.004 and
later), and lockf(3) if neither of the two previous system calls exists.
On some systems, it may even use a different form of native locking.
Here are some gotchas with Perl's flock():</p>
<dl>
<li>
<p>Produces a fatal error if none of the three system calls (or their
close equivalent) exists.</p>
</li>
<li>
<p>lockf(3) does not provide shared locking, and requires that the
filehandle be open for writing (or appending, or read/writing).</p>
</li>
<li>
<p>Some versions of flock() can't lock files over a network (e.g. on NFS file
systems), so you'd need to force the use of fcntl(2) when you build Perl.
But even this is dubious at best.  See the flock entry of <a href="perlfunc.html">perlfunc</a>
and the <i>INSTALL</i> file in the source distribution for information on
building Perl to do this.</p>
<p>Two potentially non-obvious but traditional flock semantics are that
it waits indefinitely until the lock is granted, and that its locks are
<i>merely advisory</i>.  Such discretionary locks are more flexible, but
offer fewer guarantees.  This means that files locked with flock() may
be modified by programs that do not also use flock().  Cars that stop
for red lights get on well with each other, but not with cars that don't
stop for red lights.  See the perlport manpage, your port's specific
documentation, or your system-specific local manpages for details.  It's
best to assume traditional behavior if you're writing portable programs.
(If you're not, you should as always feel perfectly free to write
for your own system's idiosyncrasies (sometimes called "features").
Slavish adherence to portability concerns shouldn't get in the way of
your getting your job done.)</p>
<p>For more information on file locking, see also
<a href="perlopentut.html#File-Locking">File Locking in perlopentut</a> if you have it (new for 5.6).</p>
</li>
</dl>
<a class='view-head2' id="Why-can't-I-just-open(FH%2c-%22%3efile.lock%22)%3f"></a><h3 class='h3' >Why can't I just open(FH, "&gt;file.lock")?
</h3>
<p>A common bit of code <strong>NOT TO USE</strong> is this:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sleep.html">sleep</a><span class="s">(</span><span class="n">3</span><span class="s">)</span> while -e <span class="q">&quot;file.lock&quot;</span><span class="sc">;</span>	<span class="c"># PLEASE DO NOT USE</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">LCK</span><span class="cm">,</span> <span class="q">&quot;&gt; file.lock&quot;</span><span class="s">)</span><span class="sc">;</span>		<span class="c"># THIS BROKEN CODE</span></li></ol></pre><p>This is a classic race condition: you take two steps to do something
which must be done in one.  That's why computer hardware provides an
atomic test-and-set instruction.   In theory, this "ought" to work:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;file.lock&quot;</span><span class="cm">,</span> <span class="w">O_WRONLY</span>|<span class="w">O_EXCL</span>|<span class="w">O_CREAT</span><span class="s">)</span></li><li>		or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t open  file.lock: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>except that lamentably, file creation (and deletion) is not atomic
over NFS, so this won't work (at least, not every time) over the net.
Various schemes involving link() have been suggested, but
these tend to involve busy-wait, which is also subdesirable.</p>
<a class='view-head2' id="I-still-don't-get-locking.--I-just-want-to-increment-the-number-in-the-file.--How-can-I-do-this%3f"></a><h3 class='h3' >I still don't get locking.  I just want to increment the number in the file.  How can I do this?
 </h3>
<p>Didn't anyone ever tell you web-page hit counters were useless?
They don't count number of hits, they're a waste of time, and they serve
only to stroke the writer's vanity.  It's better to pick a random number;
they're more realistic.</p>
<p>Anyway, this is what you can do if you can't help yourself.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Fcntl</span> <span class="q">qw(:DEFAULT :flock)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/sysopen.html">sysopen</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;numfile&quot;</span><span class="cm">,</span> <span class="w">O_RDWR</span>|<span class="w">O_CREAT</span><span class="s">)</span> 	 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t open numfile: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/flock.html">flock</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="w">LOCK_EX</span><span class="s">)</span> 				 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t flock numfile: $!&quot;</span><span class="sc">;</span></li><li>    <span class="i">$num</span> = <span class="q">&lt;FH&gt;</span> || <span class="n">0</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span> 				 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t rewind numfile: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/truncate.html">truncate</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span> 				 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t truncate numfile: $!&quot;</span><span class="sc">;</span></li><li>    <span class="s">(</span><a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span> <span class="i">$num</span>+<span class="n">1</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="s">)</span>			 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t write numfile: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/close.html">close</a> <span class="w">FH</span> 					 or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close numfile: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>Here's a much better web-page hit counter:</p>
<pre class="verbatim"><ol><li>    <span class="i">$hits</span> = <a class="l_k" href="functions/int.html">int</a><span class="s">(</span> <span class="s">(</span><a class="l_k" href="functions/time.html">time</a><span class="s">(</span><span class="s">)</span> - <span class="n">850_000_000</span><span class="s">)</span> / <a class="l_k" href="functions/rand.html">rand</a><span class="s">(</span><span class="n">1_000</span><span class="s">)</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If the count doesn't impress your friends, then the code might.  :-)</p>
<a class='view-head2' id="All-I-want-to-do-is-append-a-small-amount-of-text-to-the-end-of-a-file.--Do-I-still-have-to-use-locking%3f"></a><h3 class='h3' >All I want to do is append a small amount of text to the end of a file.  Do I still have to use locking?
 </h3>
<p>If you are on a system that correctly implements flock() and you use the
example appending code from "perldoc -f flock" everything will be OK
even if the OS you are on doesn't implement append mode correctly (if
such a system exists.) So if you are happy to restrict yourself to OSs
that implement flock() (and that's not really much of a restriction)
then that is what you should do.</p>
<p>If you know you are only going to use a system that does correctly
implement appending (i.e. not Win32) then you can omit the seek() from
the above code.</p>
<p>If you know you are only writing code to run on an OS and filesystem that
does implement append mode correctly (a local filesystem on a modern
Unix for example), and you keep the file in block-buffered mode and you
write less than one buffer-full of output between each manual flushing
of the buffer then each bufferload is almost guaranteed to be written to
the end of the file in one chunk without getting intermingled with
anyone else's output. You can also use the syswrite() function which is
simply a wrapper around your systems write(2) system call.</p>
<p>There is still a small theoretical chance that a signal will interrupt
the system level write() operation before completion.  There is also a
possibility that some STDIO implementations may call multiple system
level write()s even if the buffer was empty to start.  There may be some
systems where this probability is reduced to zero.</p>
<a class='view-head2' id="How-do-I-randomly-update-a-binary-file%3f"></a><h3 class='h3' >How do I randomly update a binary file?
</h3>
<p>If you're just trying to patch a binary, in many cases something as
simple as this works:</p>
<pre class="verbatim"><ol><li>    <span class="w">perl</span> -<span class="w">i</span> -<span class="w">pe</span> <span class="q">&#39;s{window manager}{window mangler}g&#39;</span> /<span class="w">usr</span>/<span class="w">bin</span>/<span class="w">emacs</span></li></ol></pre><p>However, if you have fixed sized records, then you might do something more
like this:</p>
<pre class="verbatim"><ol><li>    <span class="i">$RECSIZE</span> = <span class="n">220</span><span class="sc">;</span> <span class="c"># size of record, in bytes</span></li><li>    <span class="i">$recno</span>   = <span class="n">37</span><span class="sc">;</span>  <span class="c"># which record to update</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;+&lt;somewhere&quot;</span><span class="s">)</span> || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t update somewhere: $!&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$recno</span> * <span class="i">$RECSIZE</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/read.html">read</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$record</span><span class="cm">,</span> <span class="i">$RECSIZE</span><span class="s">)</span> == <span class="i">$RECSIZE</span> || <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t read record $recno: $!&quot;</span><span class="sc">;</span></li><li>    <span class="c"># munge the record</span></li><li>    <a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> -<span class="i">$RECSIZE</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span> <span class="i">$record</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/close.html">close</a> <span class="w">FH</span><span class="sc">;</span></li></ol></pre><p>Locking and error checking are left as an exercise for the reader.
Don't forget them or you'll be quite sorry.</p>
<a class='view-head2' id="How-do-I-get-a-file's-timestamp-in-perl%3f"></a><h3 class='h3' >How do I get a file's timestamp in perl?
 </h3>
<p>If you want to retrieve the time at which the file was last
read, written, or had its meta-data (owner, etc) changed,
you use the <strong>-A</strong>, <strong>-M</strong>, or <strong>-C</strong> file test operations as
documented in <a href="perlfunc.html">perlfunc</a>.  These retrieve the age of the
file (measured against the start-time of your program) in
days as a floating point number. Some platforms may not have
all of these times.  See <a href="perlport.html">perlport</a> for details. To
retrieve the "raw" time in seconds since the epoch, you
would call the stat function, then use localtime(),
gmtime(), or POSIX::strftime() to convert this into
human-readable form.</p>
<p>Here's an example:</p>
<pre class="verbatim"><ol><li>    <span class="i">$write_secs</span> = <span class="s">(</span><a class="l_k" href="functions/stat.html">stat</a><span class="s">(</span><span class="i">$file</span><span class="s">)</span><span class="s">)</span>[<span class="n">9</span>]<span class="sc">;</span></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;file %s updated at %s\n&quot;</span><span class="cm">,</span> <span class="i">$file</span><span class="cm">,</span></li><li>	<a class="l_k" href="functions/scalar.html">scalar</a> <a class="l_k" href="functions/localtime.html">localtime</a><span class="s">(</span><span class="i">$write_secs</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If you prefer something more legible, use the File::stat module
(part of the standard distribution in version 5.004 and later):</p>
<pre class="verbatim"><ol><li>    <span class="c"># error checking left as an exercise for reader.</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">File::stat</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Time::localtime</span><span class="sc">;</span></li><li>    <span class="i">$date_string</span> = <span class="i">ctime</span><span class="s">(</span><a class="l_k" href="functions/stat.html">stat</a><span class="s">(</span><span class="i">$file</span><span class="s">)</span><span class="i">-&gt;mtime</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;file $file updated at $date_string\n&quot;</span><span class="sc">;</span></li></ol></pre><p>The POSIX::strftime() approach has the benefit of being,
in theory, independent of the current locale.  See <a href="perllocale.html">perllocale</a>
for details.</p>
<a class='view-head2' id="How-do-I-set-a-file's-timestamp-in-perl%3f"></a><h3 class='h3' >How do I set a file's timestamp in perl?
 </h3>
<p>You use the utime() function documented in <a class='function-name' href="functions/utime.html">utime</a>.
By way of example, here's a little program that copies the
read and write times from its first argument to all the rest
of them.</p>
<pre class="verbatim"><ol><li>    if <span class="s">(</span><span class="i">@ARGV</span> &lt; <span class="n">2</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;usage: cptimes timestamp_file other_files ...\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <span class="i">$timestamp</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>    <span class="s">(</span><span class="i">$atime</span><span class="cm">,</span> <span class="i">$mtime</span><span class="s">)</span> = <span class="s">(</span><a class="l_k" href="functions/stat.html">stat</a><span class="s">(</span><span class="i">$timestamp</span><span class="s">)</span><span class="s">)</span>[<span class="n">8</span><span class="cm">,</span><span class="n">9</span>]<span class="sc">;</span></li><li>    <a class="l_k" href="functions/utime.html">utime</a> <span class="i">$atime</span><span class="cm">,</span> <span class="i">$mtime</span><span class="cm">,</span> <span class="i">@ARGV</span><span class="sc">;</span></li></ol></pre><p>Error checking is, as usual, left as an exercise for the reader.</p>
<p>The perldoc for utime also has an example that has the same
effect as touch(1) on files that <i>already exist</i>.</p>
<p>Certain file systems have a limited ability to store the times
on a file at the expected level of precision.  For example, the
FAT and HPFS filesystem are unable to create dates on files with
a finer granularity than two seconds.  This is a limitation of
the filesystems, not of utime().</p>
<a class='view-head2' id="How-do-I-print-to-more-than-one-file-at-once%3f"></a><h3 class='h3' >How do I print to more than one file at once?
</h3>
<p>To connect one filehandle to several output filehandles,
you can use the IO::Tee or Tie::FileHandle::Multiplex modules.</p>
<p>If you only have to do this once, you can print individually
to each filehandle.</p>
<pre class="verbatim"><ol><li>    for <span class="i">$fh</span> <span class="s">(</span><span class="w">FH1</span><span class="cm">,</span> <span class="w">FH2</span><span class="cm">,</span> <span class="w">FH3</span><span class="s">)</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">$fh</span> <span class="q">&quot;whatever\n&quot;</span> <span class="s">}</span></li></ol></pre><a class='view-head2' id="How-can-I-read-in-an-entire-file-all-at-once%3f"></a><h3 class='h3' >How can I read in an entire file all at once?
 </h3>
<p>You can use the File::Slurp module to do it in one step.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">File::Slurp</span><span class="sc">;</span></li><li></li><li>	<span class="i">$all_of_it</span> = <span class="i">read_file</span><span class="s">(</span><span class="i">$filename</span><span class="s">)</span><span class="sc">;</span> <span class="c"># entire file in scalar</span></li><li>    <span class="i">@all_lines</span> = <span class="i">read_file</span><span class="s">(</span><span class="i">$filename</span><span class="s">)</span><span class="sc">;</span> <span class="c"># one line perl element</span></li></ol></pre><p>The customary Perl approach for processing all the lines in a file is to
do so one line at a time:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a> <span class="s">(</span><span class="w">INPUT</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> 	|| <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t open $file: $!&quot;</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="q">&lt;INPUT&gt;</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/chomp.html">chomp</a><span class="sc">;</span></li><li>	<span class="c"># do something with $_</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">INPUT</span><span class="s">)</span>	    	|| <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t close $file: $!&quot;</span><span class="sc">;</span></li></ol></pre><p>This is tremendously more efficient than reading the entire file into
memory as an array of lines and then processing it one element at a time,
which is often--if not almost always--the wrong approach.  Whenever
you see someone do this:</p>
<pre class="verbatim"><ol><li>    <span class="i">@lines</span> = <span class="q">&lt;INPUT&gt;</span><span class="sc">;</span></li></ol></pre><p>you should think long and hard about why you need everything loaded at
once.  It's just not a scalable solution.  You might also find it more
fun to use the standard Tie::File module, or the DB_File module's
$DB_RECNO bindings, which allow you to tie an array to a file so that
accessing an element the array actually accesses the corresponding
line in the file.</p>
<p>You can read the entire filehandle contents into a scalar.</p>
<pre class="verbatim"><ol><li>    <span class="s">{</span></li><li>	<a class="l_k" href="functions/local.html">local</a><span class="s">(</span><span class="i">*INPUT</span><span class="cm">,</span> <span class="i">$/</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/open.html">open</a> <span class="s">(</span><span class="w">INPUT</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span> 	|| <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t open $file: $!&quot;</span><span class="sc">;</span></li><li>	<span class="i">$var</span> = <span class="q">&lt;INPUT&gt;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>That temporarily undefs your record separator, and will automatically
close the file at block exit.  If the file is already open, just use this:</p>
<pre class="verbatim"><ol><li>    <span class="i">$var</span> = <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span> <a class="l_k" href="functions/local.html">local</a> <span class="i">$/</span><span class="sc">;</span> <span class="q">&lt;INPUT&gt;</span> <span class="s">}</span><span class="sc">;</span></li></ol></pre><p>For ordinary files you can also use the read function.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/read.html">read</a><span class="s">(</span> <span class="w">INPUT</span><span class="cm">,</span> <span class="i">$var</span><span class="cm">,</span> -s <span class="w">INPUT</span> <span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The third argument tests the byte size of the data on the INPUT filehandle
and reads that many bytes into the buffer $var.</p>
<a class='view-head2' id="How-can-I-read-in-a-file-by-paragraphs%3f"></a><h3 class='h3' >How can I read in a file by paragraphs?
</h3>
<p>Use the <code class="inline"><span class="i">$/</span></code>
 variable (see <a href="perlvar.html">perlvar</a> for details).  You can either
set it to <code class="inline"><span class="q">&quot;&quot;</span></code>
 to eliminate empty paragraphs (<code class="inline"><span class="q">&quot;abc\n\n\n\ndef&quot;</span></code>
,
for instance, gets treated as two paragraphs and not three), or
<code class="inline"><span class="q">&quot;\n\n&quot;</span></code>
 to accept empty paragraphs.</p>
<p>Note that a blank line must have no blanks in it.  Thus
<code class="inline"><span class="q">&quot;fred\n \nstuff\n\n&quot;</span></code>
 is one paragraph, but <code class="inline"><span class="q">&quot;fred\n\nstuff\n\n&quot;</span></code>
 is two.</p>
<a class='view-head2' id="How-can-I-read-a-single-character-from-a-file%3f--From-the-keyboard%3f"></a><h3 class='h3' >How can I read a single character from a file?  From the keyboard?
 </h3>
<p>You can use the builtin <code class="inline"><a class="l_k" href="functions/getc.html">getc()</a></code> function for most filehandles, but
it won't (easily) work on a terminal device.  For STDIN, either use
the Term::ReadKey module from CPAN or use the sample code in
<a class='function-name' href="functions/getc.html">getc</a>.</p>
<p>If your system supports the portable operating system programming
interface (POSIX), you can use the following code, which you'll note
turns off echo processing as well.</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/bin/perl -w</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span></li><li>    <span class="i">$|</span> = <span class="n">1</span><span class="sc">;</span></li><li>    for <span class="s">(</span><span class="n">1</span>..<span class="n">4</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$got</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;gimme: &quot;</span><span class="sc">;</span></li><li>	<span class="i">$got</span> = <span class="i">getone</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;--&gt; $got\n&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    <a class="l_k" href="functions/exit.html">exit</a><span class="sc">;</span></li><li></li><li>    BEGIN <span class="s">{</span></li><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span> <span class="q">qw(:termios_h)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$term</span><span class="cm">,</span> <span class="i">$oterm</span><span class="cm">,</span> <span class="i">$echo</span><span class="cm">,</span> <span class="i">$noecho</span><span class="cm">,</span> <span class="i">$fd_stdin</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	<span class="i">$fd_stdin</span> = <a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">STDIN</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	<span class="i">$term</span>     = <span class="w">POSIX::Termios</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$term</span><span class="i">-&gt;getattr</span><span class="s">(</span><span class="i">$fd_stdin</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$oterm</span>     = <span class="i">$term</span><span class="i">-&gt;getlflag</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	<span class="i">$echo</span>     = <span class="w">ECHO</span> | <span class="w">ECHOK</span> | <span class="w">ICANON</span><span class="sc">;</span></li><li>	<span class="i">$noecho</span>   = <span class="i">$oterm</span> &amp; ~<span class="i">$echo</span><span class="sc">;</span></li><li></li><li><a name="cbreak"></a>	sub <span class="m">cbreak</span> <span class="s">{</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setlflag</span><span class="s">(</span><span class="i">$noecho</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setcc</span><span class="s">(</span><span class="w">VTIME</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setattr</span><span class="s">(</span><span class="i">$fd_stdin</span><span class="cm">,</span> <span class="w">TCSANOW</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li></li><li><a name="cooked"></a>	sub <span class="m">cooked</span> <span class="s">{</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setlflag</span><span class="s">(</span><span class="i">$oterm</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setcc</span><span class="s">(</span><span class="w">VTIME</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="i">$term</span><span class="i">-&gt;setattr</span><span class="s">(</span><span class="i">$fd_stdin</span><span class="cm">,</span> <span class="w">TCSANOW</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li></li><li><a name="getone"></a>	sub <span class="m">getone</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/my.html">my</a> <span class="i">$key</span> = <span class="q">&#39;&#39;</span><span class="sc">;</span></li><li>	    <span class="i">cbreak</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/sysread.html">sysread</a><span class="s">(</span><span class="w">STDIN</span><span class="cm">,</span> <span class="i">$key</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li><li>	    <span class="i">cooked</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	    <a class="l_k" href="functions/return.html">return</a> <span class="i">$key</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li></li><li>    <span class="s">}</span></li><li></li><li>    END <span class="s">{</span> <span class="i">cooked</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span></li></ol></pre><p>The Term::ReadKey module from CPAN may be easier to use.  Recent versions
include also support for non-portable systems as well.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Term::ReadKey</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">TTY</span><span class="cm">,</span> <span class="q">&quot;&lt;/dev/tty&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Gimme a char: &quot;</span><span class="sc">;</span></li><li>    <span class="w">ReadMode</span> <span class="q">&quot;raw&quot;</span><span class="sc">;</span></li><li>    <span class="i">$key</span> = <span class="w">ReadKey</span> <span class="n">0</span><span class="cm">,</span> <span class="i">*TTY</span><span class="sc">;</span></li><li>    <span class="w">ReadMode</span> <span class="q">&quot;normal&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;\nYou said %s, char number %03d\n&quot;</span><span class="cm">,</span></li><li>        <span class="i">$key</span><span class="cm">,</span> <a class="l_k" href="functions/ord.html">ord</a> <span class="i">$key</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="How-can-I-tell-whether-there's-a-character-waiting-on-a-filehandle%3f"></a><h3 class='h3' >How can I tell whether there's a character waiting on a filehandle?</h3>
<p>The very first thing you should do is look into getting the Term::ReadKey
extension from CPAN.  As we mentioned earlier, it now even has limited
support for non-portable (read: not open systems, closed, proprietary,
not POSIX, not Unix, etc) systems.</p>
<p>You should also check out the Frequently Asked Questions list in
comp.unix.* for things like this: the answer is essentially the same.
It's very system dependent.  Here's one solution that works on BSD
systems:</p>
<pre class="verbatim"><ol><li><a name="key_ready"></a>    sub <span class="m">key_ready</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$rin</span><span class="cm">,</span> <span class="i">$nfd</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/vec.html">vec</a><span class="s">(</span><span class="i">$rin</span><span class="cm">,</span> <a class="l_k" href="functions/fileno.html">fileno</a><span class="s">(</span><span class="w">STDIN</span><span class="s">)</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span> = <span class="n">1</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$nfd</span> = <a class="l_k" href="functions/select.html">select</a><span class="s">(</span><span class="i">$rin</span><span class="cm">,</span><a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span><a class="l_k" href="functions/undef.html">undef</a><span class="cm">,</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you want to find out how many characters are waiting, there's
also the FIONREAD ioctl call to be looked at.  The <i>h2ph</i> tool that
comes with Perl tries to convert C include files to Perl code, which
can be <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>d.  FIONREAD ends up defined as a function in the
<i>sys/ioctl.ph</i> file:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/require.html">require</a> <span class="q">&#39;sys/ioctl.ph&#39;</span><span class="sc">;</span></li><li></li><li>    <span class="i">$size</span> = <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;L&quot;</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/ioctl.html">ioctl</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">FIONREAD</span><span class="s">(</span><span class="s">)</span><span class="cm">,</span> <span class="i">$size</span><span class="s">)</span>    or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Couldn&#39;t call ioctl: $!\n&quot;</span><span class="sc">;</span></li><li>    <span class="i">$size</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;L&quot;</span><span class="cm">,</span> <span class="i">$size</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>If <i>h2ph</i> wasn't installed or doesn't work for you, you can
<i>grep</i> the include files by hand:</p>
<pre class="verbatim"><ol><li>    <span class="i">% grep</span> <span class="w">FIONREAD</span> /<span class="w">usr</span>/<span class="w">include</span><span class="q">/*/</span>*</li><li>    <span class="q">/usr/include</span>/<span class="w">asm</span>/<span class="w">ioctls</span>.<span class="w">h</span><span class="co">:</span><span class="c">#define FIONREAD      0x541B</span></li></ol></pre><p>Or write a small C program using the editor of champions:</p>
<pre class="verbatim"><ol><li>    <span class="i">% cat</span> &gt; <span class="w">fionread</span>.<span class="w">c</span></li><li>    <span class="c">#include &lt;sys/ioctl.h&gt;</span></li><li>    <span class="i">main</span><span class="s">(</span><span class="s">)</span> <span class="s">{</span></li><li>        <a class="l_k" href="functions/printf.html">printf</a><span class="s">(</span><span class="q">&quot;%#08x\n&quot;</span><span class="cm">,</span> <span class="w">FIONREAD</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li>    ^<span class="w">D</span></li><li>    % <span class="w">cc</span> -o <span class="w">fionread</span> <span class="w">fionread</span>.<span class="w">c</span></li><li>    % .<span class="q">/fionread</span></li><li>    <span class="q">    0x4004667f</span></li></ol></pre><p>And then hard code it, leaving porting as an exercise to your successor.</p>
<pre class="verbatim"><ol><li>    <span class="i">$FIONREAD</span> = <span class="n">0x4004667f</span><span class="sc">;</span>         <span class="c"># XXX: opsys dependent</span></li><li></li><li>    <span class="i">$size</span> = <a class="l_k" href="functions/pack.html">pack</a><span class="s">(</span><span class="q">&quot;L&quot;</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/ioctl.html">ioctl</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="i">$FIONREAD</span><span class="cm">,</span> <span class="i">$size</span><span class="s">)</span>     or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Couldn&#39;t call ioctl: $!\n&quot;</span><span class="sc">;</span></li><li>    <span class="i">$size</span> = <a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;L&quot;</span><span class="cm">,</span> <span class="i">$size</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>FIONREAD requires a filehandle connected to a stream, meaning that sockets,
pipes, and tty devices work, but <i>not</i> files.</p>
<a class='view-head2' id="How-do-I-do-a-tail--f-in-perl%3f"></a><h3 class='h3' >How do I do a <code class="inline"><span class="w">tail</span> -f</code>
 in perl?
</h3>
<p>First try</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">GWFILE</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The statement <code class="inline"><a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">GWFILE</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span></code>
 doesn't change the current position,
but it does clear the end-of-file condition on the handle, so that the
next &lt;GWFILE&gt; makes Perl try again to read something.</p>
<p>If that doesn't work (it relies on features of your stdio implementation),
then you need something more like this:</p>
<pre class="verbatim"><ol><li>	for <span class="s">(</span><span class="sc">;</span><span class="sc">;</span><span class="s">)</span> <span class="s">{</span></li><li>	  for <span class="s">(</span><span class="i">$curpos</span> = <a class="l_k" href="functions/tell.html">tell</a><span class="s">(</span><span class="w">GWFILE</span><span class="s">)</span><span class="sc">;</span> <span class="q">&lt;GWFILE&gt;</span><span class="sc">;</span> <span class="i">$curpos</span> = <a class="l_k" href="functions/tell.html">tell</a><span class="s">(</span><span class="w">GWFILE</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span></li><li>	    <span class="c"># search for some stuff and put it into files</span></li><li>	  <span class="s">}</span></li><li>	  <span class="c"># sleep for a while</span></li><li>	  <a class="l_k" href="functions/seek.html">seek</a><span class="s">(</span><span class="w">GWFILE</span><span class="cm">,</span> <span class="i">$curpos</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># seek to where we had been</span></li><li>	<span class="s">}</span></li></ol></pre><p>If this still doesn't work, look into the POSIX module.  POSIX defines
the clearerr() method, which can remove the end of file condition on a
filehandle.  The method: read until end of file, clearerr(), read some
more.  Lather, rinse, repeat.</p>
<p>There's also a File::Tail module from CPAN.</p>
<a class='view-head2' id="How-do-I-dup()-a-filehandle-in-Perl%3f"></a><h3 class='h3' >How do I dup() a filehandle in Perl?
</h3>
<p>If you check <a class='function-name' href="functions/open.html">open</a>, you'll see that several of the ways
to call open() should do the trick.  For example:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">LOG</span><span class="cm">,</span> <span class="q">&quot;&gt;&gt;/foo/logfile&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">STDERR</span><span class="cm">,</span> <span class="q">&quot;&gt;&amp;LOG&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Or even with a literal numeric descriptor:</p>
<pre class="verbatim"><ol><li>   <span class="i">$fd</span> = <span class="i">$ENV</span>{<span class="w">MHCONTEXTFD</span>}<span class="sc">;</span></li><li>   <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">MHCONTEXT</span><span class="cm">,</span> <span class="q">&quot;&lt;&amp;=$fd&quot;</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># like fdopen(3S)</span></li></ol></pre><p>Note that "&lt;&amp;STDIN" makes a copy, but "&lt;&amp;=STDIN" make
an alias.  That means if you close an aliased handle, all
aliases become inaccessible.  This is not true with
a copied one.</p>
<p>Error checking, as always, has been left as an exercise for the reader.</p>
<a class='view-head2' id="How-do-I-close-a-file-descriptor-by-number%3f"></a><h3 class='h3' >How do I close a file descriptor by number?
</h3>
<p>This should rarely be necessary, as the Perl close() function is to be
used for things that Perl opened itself, even if it was a dup of a
numeric descriptor as with MHCONTEXT above.  But if you really have
to, you may be able to do this:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/require.html">require</a> <span class="q">&#39;sys/syscall.ph&#39;</span><span class="sc">;</span></li><li>    <span class="i">$rc</span> = <a class="l_k" href="functions/syscall.html">syscall</a><span class="s">(</span><span class="i">&amp;SYS_close</span><span class="cm">,</span> <span class="i">$fd</span> + <span class="n">0</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># must force numeric</span></li><li>    <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;can&#39;t sysclose $fd: $!&quot;</span> unless <span class="i">$rc</span> == <span class="n">-1</span><span class="sc">;</span></li></ol></pre><p>Or, just use the fdopen(3S) feature of open():</p>
<pre class="verbatim"><ol><li>    <span class="s">{</span></li><li>	<a class="l_k" href="functions/local.html">local</a> <span class="i">*F</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/open.html">open</a> <span class="w">F</span><span class="cm">,</span> <span class="q">&quot;&lt;&amp;=$fd&quot;</span> or <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot reopen fd=$fd: $!&quot;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/close.html">close</a> <span class="w">F</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="Why-can't-I-use-%22C%3a%5ctemp%5cfoo%22-in-DOS-paths%3f--Why-doesn't-%60C%3a%5ctemp%5cfoo.exe%60-work%3f"></a><h3 class='h3' >Why can't I use "C:\temp\foo" in DOS paths?  Why doesn't `C:\temp\foo.exe` work?
</h3>
<p>Whoops!  You just put a tab and a formfeed into that filename!
Remember that within double quoted strings ("like\this"), the
backslash is an escape character.  The full list of these is in
<a href="perlop.html#Quote-and-Quote-like-Operators">Quote and Quote-like Operators in perlop</a>.  Unsurprisingly, you don't
have a file called "c:(tab)emp(formfeed)oo" or
"c:(tab)emp(formfeed)oo.exe" on your legacy DOS filesystem.</p>
<p>Either single-quote your strings, or (preferably) use forward slashes.
Since all DOS and Windows versions since something like MS-DOS 2.0 or so
have treated <code class="inline"><span class="q">/</span></code>
 and <code class="inline">\</code>
 the same in a path, you might as well use the
one that doesn't clash with Perl--or the POSIX shell, ANSI C and C++,
awk, Tcl, Java, or Python, just to mention a few.  POSIX paths
are more portable, too.</p>
<a class='view-head2' id="Why-doesn't-glob(%22*.*%22)-get-all-the-files%3f"></a><h3 class='h3' >Why doesn't glob("*.*") get all the files?
</h3>
<p>Because even on non-Unix ports, Perl's glob function follows standard
Unix globbing semantics.  You'll need <code class="inline"><a class="l_k" href="functions/glob.html">glob("*")</a></code> to get all (non-hidden)
files.  This makes glob() portable even to legacy systems.  Your
port may include proprietary globbing functions as well.  Check its
documentation for details.</p>
<a class='view-head2' id="Why-does-Perl-let-me-delete-read-only-files%3f--Why-does--i-clobber-protected-files%3f--Isn't-this-a-bug-in-Perl%3f"></a><h3 class='h3' >Why does Perl let me delete read-only files?  Why does <code class="inline">-<span class="w">i</span></code>
 clobber protected files?  Isn't this a bug in Perl?</h3>
<p>This is elaborately and painstakingly described in the
<i>file-dir-perms</i> article in the "Far More Than You Ever Wanted To
Know" collection in <a href="http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz">http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz</a> .</p>
<p>The executive summary: learn how your filesystem works.  The
permissions on a file say what can happen to the data in that file.
The permissions on a directory say what can happen to the list of
files in that directory.  If you delete a file, you're removing its
name from the directory (so the operation depends on the permissions
of the directory, not of the file).  If you try to write to the file,
the permissions of the file govern whether you're allowed to.</p>
<a class='view-head2' id="How-do-I-select-a-random-line-from-a-file%3f"></a><h3 class='h3' >How do I select a random line from a file?
</h3>
<p>Here's an algorithm from the Camel Book:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/srand.html">srand</a><span class="sc">;</span></li><li>    <a class="l_k" href="functions/rand.html">rand</a><span class="s">(</span><span class="i">$.</span><span class="s">)</span> &lt; <span class="n">1</span> &amp;&amp; <span class="s">(</span><span class="i">$line</span> = <span class="i">$_</span><span class="s">)</span> while &lt;&gt;<span class="sc">;</span></li></ol></pre><p>This has a significant advantage in space over reading the whole file
in.  You can find a proof of this method in <i>The Art of Computer
Programming</i>, Volume 2, Section 3.4.2, by Donald E. Knuth.</p>
<p>You can use the File::Random module which provides a function
for that algorithm:</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/use.html">use</a> <span class="w">File::Random</span> <span class="q">qw/random_line/</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$line</span> = <span class="i">random_line</span><span class="s">(</span><span class="i">$filename</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Another way is to use the Tie::File module, which treats the entire
file as an array.  Simply access a random array element.</p>
<a class='view-head2' id="Why-do-I-get-weird-spaces-when-I-print-an-array-of-lines%3f"></a><h3 class='h3' >Why do I get weird spaces when I print an array of lines?</h3>
<p>Saying</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;@lines\n&quot;</span><span class="sc">;</span></li></ol></pre><p>joins together the elements of <code class="inline"><span class="i">@lines</span></code>
 with a space between them.
If <code class="inline"><span class="i">@lines</span></code>
 were <code class="inline"><span class="s">(</span><span class="q">&quot;little&quot;</span><span class="cm">,</span> <span class="q">&quot;fluffy&quot;</span><span class="cm">,</span> <span class="q">&quot;clouds&quot;</span><span class="s">)</span></code>
 then the above
statement would print</p>
<pre class="verbatim"><ol><li>    <span class="w">little</span> <span class="w">fluffy</span> <span class="w">clouds</span></li></ol></pre><p>but if each element of <code class="inline"><span class="i">@lines</span></code>
 was a line of text, ending a newline
character <code class="inline"><span class="s">(</span><span class="q">&quot;little\n&quot;</span><span class="cm">,</span> <span class="q">&quot;fluffy\n&quot;</span><span class="cm">,</span> <span class="q">&quot;clouds\n&quot;</span><span class="s">)</span></code>
 then it would print:</p>
<pre class="verbatim"><ol><li>    <span class="w">little</span></li><li>     <span class="w">fluffy</span></li><li>     <span class="w">clouds</span></li></ol></pre><p>If your array contains lines, just print them:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/print.html">print</a> <span class="i">@lines</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="AUTHOR-AND-COPYRIGHT"></a><h2 class='h2' >AUTHOR AND COPYRIGHT</h2>
<p>Copyright (c) 1997-2006 Tom Christiansen, Nathan Torkington, and
other authors as noted. All rights reserved.</p>
<p>This documentation is free; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p>Irrespective of its distribution, all code examples here are in the public
domain.  You are permitted and encouraged to use this code and any
derivatives thereof in your own programs for fun or for profit as you
see fit.  A simple comment in the code giving credit to the FAQ would
be courteous but is not required.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#How-do-I-flush%2funbuffer-an-output-filehandle%3f--Why-must-I-do-this%3f">How do I flush/unbuffer an output filehandle?  Why must I do this?
   </a></li><li><a href="#How-do-I-change-one-line-in-a-file%2fdelete-a-line-in-a-file%2finsert-a-line-in-the-middle-of-a-file%2fappend-to-the-beginning-of-a-file%3f">How do I change one line in a file/delete a line in a file/insert a line in the middle of a file/append to the beginning of a file?
</a></li><li><a href="#How-do-I-count-the-number-of-lines-in-a-file%3f">How do I count the number of lines in a file?
  </a></li><li><a href="#How-can-I-use-Perl's--i-option-from-within-a-program%3f">How can I use Perl's -i option from within a program?
 </a></li><li><a href="#How-can-I-copy-a-file%3f">How can I copy a file?
 </a></li><li><a href="#How-do-I-make-a-temporary-file-name%3f">How do I make a temporary file name?
</a></li><li><a href="#How-can-I-manipulate-fixed-record-length-files%3f">How can I manipulate fixed-record-length files?
 </a></li><li><a href="#How-can-I-make-a-filehandle-local-to-a-subroutine%3f--How-do-I-pass-filehandles-between-subroutines%3f--How-do-I-make-an-array-of-filehandles%3f">How can I make a filehandle local to a subroutine?  How do I pass filehandles between subroutines?  How do I make an array of filehandles?
  </a></li><li><a href="#How-can-I-use-a-filehandle-indirectly%3f">How can I use a filehandle indirectly?
</a></li><li><a href="#How-can-I-set-up-a-footer-format-to-be-used-with-write()%3f">How can I set up a footer format to be used with write()?
</a></li><li><a href="#How-can-I-write()-into-a-string%3f">How can I write() into a string?
</a></li><li><a href="#How-can-I-output-my-numbers-with-commas-added%3f">How can I output my numbers with commas added?
</a></li><li><a href="#How-can-I-translate-tildes-(~)-in-a-filename%3f">How can I translate tildes (~) in a filename?
 </a></li><li><a href="#How-come-when-I-open-a-file-read-write-it-wipes-it-out%3f">How come when I open a file read-write it wipes it out?
    </a></li><li><a href="#Why-do-I-sometimes-get-an-%22Argument-list-too-long%22-when-I-use-%3c*%3e%3f">Why do I sometimes get an "Argument list too long" when I use <*>?
</a></li><li><a href="#Is-there-a-leak%2fbug-in-glob()%3f">Is there a leak/bug in glob()?
</a></li><li><a href="#How-can-I-open-a-file-with-a-leading-%22%3e%22-or-trailing-blanks%3f">How can I open a file with a leading ">" or trailing blanks?
</a></li><li><a href="#How-can-I-reliably-rename-a-file%3f">How can I reliably rename a file?
    </a></li><li><a href="#How-can-I-lock-a-file%3f">How can I lock a file?
  </a></li><li><a href="#Why-can't-I-just-open(FH%2c-%22%3efile.lock%22)%3f">Why can't I just open(FH, ">file.lock")?
</a></li><li><a href="#I-still-don't-get-locking.--I-just-want-to-increment-the-number-in-the-file.--How-can-I-do-this%3f">I still don't get locking.  I just want to increment the number in the file.  How can I do this?
 </a></li><li><a href="#All-I-want-to-do-is-append-a-small-amount-of-text-to-the-end-of-a-file.--Do-I-still-have-to-use-locking%3f">All I want to do is append a small amount of text to the end of a file.  Do I still have to use locking?
 </a></li><li><a href="#How-do-I-randomly-update-a-binary-file%3f">How do I randomly update a binary file?
</a></li><li><a href="#How-do-I-get-a-file's-timestamp-in-perl%3f">How do I get a file's timestamp in perl?
 </a></li><li><a href="#How-do-I-set-a-file's-timestamp-in-perl%3f">How do I set a file's timestamp in perl?
 </a></li><li><a href="#How-do-I-print-to-more-than-one-file-at-once%3f">How do I print to more than one file at once?
</a></li><li><a href="#How-can-I-read-in-an-entire-file-all-at-once%3f">How can I read in an entire file all at once?
 </a></li><li><a href="#How-can-I-read-in-a-file-by-paragraphs%3f">How can I read in a file by paragraphs?
</a></li><li><a href="#How-can-I-read-a-single-character-from-a-file%3f--From-the-keyboard%3f">How can I read a single character from a file?  From the keyboard?
 </a></li><li><a href="#How-can-I-tell-whether-there's-a-character-waiting-on-a-filehandle%3f">How can I tell whether there's a character waiting on a filehandle?</a></li><li><a href="#How-do-I-do-a-tail--f-in-perl%3f">How do I do a tail -f in perl?
</a></li><li><a href="#How-do-I-dup()-a-filehandle-in-Perl%3f">How do I dup() a filehandle in Perl?
</a></li><li><a href="#How-do-I-close-a-file-descriptor-by-number%3f">How do I close a file descriptor by number?
</a></li><li><a href="#Why-can't-I-use-%22C%3a%5ctemp%5cfoo%22-in-DOS-paths%3f--Why-doesn't-%60C%3a%5ctemp%5cfoo.exe%60-work%3f">Why can't I use "C:\temp\foo" in DOS paths?  Why doesn't `C:\temp\foo.exe` work?
</a></li><li><a href="#Why-doesn't-glob(%22*.*%22)-get-all-the-files%3f">Why doesn't glob("*.*") get all the files?
</a></li><li><a href="#Why-does-Perl-let-me-delete-read-only-files%3f--Why-does--i-clobber-protected-files%3f--Isn't-this-a-bug-in-Perl%3f">Why does Perl let me delete read-only files?  Why does -i clobber protected files?  Isn't this a bug in Perl?</a></li><li><a href="#How-do-I-select-a-random-line-from-a-file%3f">How do I select a random line from a file?
</a></li><li><a href="#Why-do-I-get-weird-spaces-when-I-print-an-array-of-lines%3f">Why do I get weird spaces when I print an array of lines?</a></li></ul><li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.8.8/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.8.8/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.8.8/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
