      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="perlobj - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>perlobj - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/perlobj.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.12.2/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.12.2/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.12.2/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.12.2/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.12.2/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.12.2/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.12.2/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-language.html">Language reference</a> &gt;
      
    
    perlobj
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 12.2
                        documentation</h7>
                    </div>
                    <h1>perlobj</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME
 </a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#An-Object-is-Simply-a-Reference">An Object is Simply a Reference
   </a></li><li><a href="#A-Class-is-Simply-a-Package">A Class is Simply a Package
   </a></li><li><a href="#A-Method-is-Simply-a-Subroutine">A Method is Simply a Subroutine
</a></li><li><a href="#Method-Invocation">Method Invocation
   </a></li><li><a href="#Indirect-Object-Syntax">Indirect Object Syntax
  </a></li><li><a href="#Default-UNIVERSAL-methods">Default UNIVERSAL methods
</a></li><li><a href="#Destructors">Destructors
 </a></li><li><a href="#Summary">Summary</a></li><li><a href="#Two-Phased-Garbage-Collection">Two-Phased Garbage Collection
  
  </a></li></ul><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME
 </h2>
<p>perlobj - Perl objects</p>
<a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>First you need to understand what references are in Perl.
See <a href="perlref.html">perlref</a> for that.  Second, if you still find the following
reference work too complicated, a tutorial on object-oriented programming
in Perl can be found in <a href="perltoot.html">perltoot</a> and <a href="perltooc.html">perltooc</a>.</p>
<p>If you're still with us, then
here are three very simple definitions that you should find reassuring.</p>
<dl>
<li>
<p>An object is simply a reference that happens to know which class it
belongs to.</p>
</li>
<li>
<p>A class is simply a package that happens to provide methods to deal
with object references.</p>
</li>
<li>
<p>A method is simply a subroutine that expects an object reference (or
a package name, for class methods) as the first argument.</p>
</li>
</dl>
<p>We'll cover these points now in more depth.</p>
<a class='view-head2' id="An-Object-is-Simply-a-Reference"></a><h3 class='h3' >An Object is Simply a Reference
   </h3>
<p>Unlike say C++, Perl doesn't provide any special syntax for
constructors.  A constructor is merely a subroutine that returns a
reference to something "blessed" into a class, generally the
class that the subroutine is defined in.  Here is a typical
constructor:</p>
<pre class="verbatim"><ol><li><a name="package-Critter"></a>    package <span class="i">Critter</span><span class="sc">;</span></li><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span> <a class="l_k" href="functions/bless.html">bless</a> <span class="s">{</span><span class="s">}</span> <span class="s">}</span></li></ol></pre><p>That word <code class="inline"><span class="w">new</span></code>
 isn't special.  You could have written
a construct this way, too:</p>
<pre class="verbatim"><ol><li><a name="package-Critter"></a>    package <span class="i">Critter</span><span class="sc">;</span></li><li><a name="spawn"></a>    sub <span class="m">spawn</span> <span class="s">{</span> <a class="l_k" href="functions/bless.html">bless</a> <span class="s">{</span><span class="s">}</span> <span class="s">}</span></li></ol></pre><p>This might even be preferable, because the C++ programmers won't
be tricked into thinking that <code class="inline"><span class="w">new</span></code>
 works in Perl as it does in C++.
It doesn't.  We recommend that you name your constructors whatever
makes sense in the context of the problem you're solving.  For example,
constructors in the Tk extension to Perl are named after the widgets
they create.</p>
<p>One thing that's different about Perl constructors compared with those in
C++ is that in Perl, they have to allocate their own memory.  (The other
things is that they don't automatically call overridden base-class
constructors.)  The <code class="inline"><span class="s">{</span><span class="s">}</span></code>
 allocates an anonymous hash containing no
key/value pairs, and returns it  The bless() takes that reference and
tells the object it references that it's now a Critter, and returns
the reference.  This is for convenience, because the referenced object
itself knows that it has been blessed, and the reference to it could
have been returned directly, like this:</p>
<pre class="verbatim"><ol><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/bless.html">bless</a> <span class="i">$self</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>You often see such a thing in more complicated constructors
that wish to call methods in the class as part of the construction:</p>
<pre class="verbatim"><ol><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/bless.html">bless</a> <span class="i">$self</span><span class="sc">;</span></li><li>	<span class="i">$self</span><span class="i">-&gt;initialize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you care about inheritance (and you should; see
<a href="perlmodlib.html#Modules%3a-Creation%2c-Use%2c-and-Abuse">Modules: Creation, Use, and Abuse in perlmodlib</a>),
then you want to use the two-arg form of bless
so that your constructors may be inherited:</p>
<pre class="verbatim"><ol><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$class</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/bless.html">bless</a> <span class="i">$self</span><span class="cm">,</span> <span class="i">$class</span><span class="sc">;</span></li><li>	<span class="i">$self</span><span class="i">-&gt;initialize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Or if you expect people to call not just <code class="inline"><span class="w">CLASS</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span></code>
 but also
<code class="inline"><span class="i">$obj</span><span class="i">-&gt;new</span><span class="s">(</span><span class="s">)</span></code>
, then use something like the following.  (Note that using
this to call new() on an instance does not automatically perform any
copying.  If you want a shallow or deep copy of an object, you'll have to
specifically allow for that.)  The initialize() method used will be of
whatever $class we blessed the object into:</p>
<pre class="verbatim"><ol><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$this</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$class</span> = <a class="l_k" href="functions/ref.html">ref</a><span class="s">(</span><span class="i">$this</span><span class="s">)</span> || <span class="i">$this</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/bless.html">bless</a> <span class="i">$self</span><span class="cm">,</span> <span class="i">$class</span><span class="sc">;</span></li><li>	<span class="i">$self</span><span class="i">-&gt;initialize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <span class="i">$self</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Within the class package, the methods will typically deal with the
reference as an ordinary reference.  Outside the class package,
the reference is generally treated as an opaque value that may
be accessed only through the class's methods.</p>
<p>Although a constructor can in theory re-bless a referenced object
currently belonging to another class, this is almost certainly going
to get you into trouble.  The new class is responsible for all
cleanup later.  The previous blessing is forgotten, as an object
may belong to only one class at a time.  (Although of course it's
free to inherit methods from many classes.)  If you find yourself
having to do this, the parent class is probably misbehaving, though.</p>
<p>A clarification:  Perl objects are blessed.  References are not.  Objects
know which package they belong to.  References do not.  The bless()
function uses the reference to find the object.  Consider
the following example:</p>
<pre class="verbatim"><ol><li>    <span class="i">$a</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>    <span class="i">$b</span> = <span class="i">$a</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/bless.html">bless</a> <span class="i">$a</span><span class="cm">,</span> <span class="w">BLAH</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;\$b is a &quot;</span><span class="cm">,</span> <a class="l_k" href="functions/ref.html">ref</a><span class="s">(</span><span class="i">$b</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></li></ol></pre><p>This reports $b as being a BLAH, so obviously bless()
operated on the object and not on the reference.</p>
<a class='view-head2' id="A-Class-is-Simply-a-Package"></a><h3 class='h3' >A Class is Simply a Package
   </h3>
<p>Unlike say C++, Perl doesn't provide any special syntax for class
definitions.  You use a package as a class by putting method
definitions into the class.</p>
<p>There is a special array within each package called @ISA, which says
where else to look for a method if you can't find it in the current
package.  This is how Perl implements inheritance.  Each element of the
@ISA array is just the name of another package that happens to be a
class package.  The classes are searched for missing methods in
depth-first, left-to-right order by default (see <a href="mro.html">mro</a> for alternative
search order and other in-depth information).  The classes accessible
through @ISA are known as base classes of the current class.</p>
<p>All classes implicitly inherit from class <code class="inline"><span class="w">UNIVERSAL</span></code>
 as their
last base class.  Several commonly used methods are automatically
supplied in the UNIVERSAL class; see <a href="#Default-UNIVERSAL-methods">Default UNIVERSAL methods</a> or
<a href="UNIVERSAL.html">UNIVERSAL</a> for more details.
  </p>
<p>If a missing method is found in a base class, it is cached
in the current class for efficiency.  Changing @ISA or defining new
subroutines invalidates the cache and causes Perl to do the lookup again.</p>
<p>If neither the current class, its named base classes, nor the UNIVERSAL
class contains the requested method, these three places are searched
all over again, this time looking for a method named AUTOLOAD().  If an
AUTOLOAD is found, this method is called on behalf of the missing method,
setting the package global $AUTOLOAD to be the fully qualified name of
the method that was intended to be called.
</p>
<p>If none of that works, Perl finally gives up and complains.</p>
<p>If you want to stop the AUTOLOAD inheritance say simply
</p>
<pre class="verbatim"><ol><li>	sub <span class="m">AUTOLOAD</span><span class="sc">;</span></li></ol></pre><p>and the call will die using the name of the sub being called.</p>
<p>Perl classes do method inheritance only.  Data inheritance is left up
to the class itself.  By and large, this is not a problem in Perl,
because most classes model the attributes of their object using an
anonymous hash, which serves as its own little namespace to be carved up
by the various classes that might want to do something with the object.
The only problem with this is that you can't sure that you aren't using
a piece of the hash that isn't already used.  A reasonable workaround
is to prepend your fieldname in the hash with the package name.
 </p>
<pre class="verbatim"><ol><li><a name="bump"></a>    sub <span class="m">bump</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<span class="i">$self</span>-&gt;{ <span class="w">__PACKAGE__</span> . <span class="q">&quot;.count&quot;</span>}++<span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="A-Method-is-Simply-a-Subroutine"></a><h3 class='h3' >A Method is Simply a Subroutine
</h3>
<p>Unlike say C++, Perl doesn't provide any special syntax for method
definition.  (It does provide a little syntax for method invocation
though.  More on that later.)  A method expects its first argument
to be the object (reference) or package (string) it is being invoked
on.  There are two ways of calling methods, which we'll call class
methods and instance methods.</p>
<p>A class method expects a class name as the first argument.  It
provides functionality for the class as a whole, not for any
individual object belonging to the class.  Constructors are often
class methods, but see <a href="perltoot.html">perltoot</a> and <a href="perltooc.html">perltooc</a> for alternatives.
Many class methods simply ignore their first argument, because they
already know what package they're in and don't care what package
they were invoked via.  (These aren't necessarily the same, because
class methods follow the inheritance tree just like ordinary instance
methods.)  Another typical use for class methods is to look up an
object by name:</p>
<pre class="verbatim"><ol><li><a name="find"></a>    sub <span class="m">find</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$class</span><span class="cm">,</span> <span class="i">$name</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>	<span class="i">$objtable</span>{<span class="i">$name</span>}<span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>An instance method expects an object reference as its first argument.
Typically it shifts the first argument into a "self" or "this" variable,
and then uses that as an ordinary reference.</p>
<pre class="verbatim"><ol><li><a name="display"></a>    sub <span class="m">display</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">@keys</span> = <span class="i">@_</span> ? <span class="i">@_</span> <span class="co">:</span> <a class="l_k" href="functions/sort.html">sort</a> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%$self</span><span class="sc">;</span></li><li>	foreach <span class="i">$key</span> <span class="s">(</span><span class="i">@keys</span><span class="s">)</span> <span class="s">{</span></li><li>	    <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;\t$key =&gt; $self-&gt;{$key}\n&quot;</span><span class="sc">;</span></li><li>	<span class="s">}</span></li><li>    <span class="s">}</span></li></ol></pre><a class='view-head2' id="Method-Invocation"></a><h3 class='h3' >Method Invocation
   </h3>
<p>For various historical and other reasons, Perl offers two equivalent
ways to write a method call.  The simpler and more common way is to use
the arrow notation:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$fred</span> = <span class="w">Critter</span><span class="w">-&gt;find</span><span class="s">(</span><span class="q">&quot;Fred&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$fred</span><span class="i">-&gt;display</span><span class="s">(</span><span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>You should already be familiar with the use of the <code class="inline">-&gt;</code>
 operator with
references.  In fact, since <code class="inline"><span class="i">$fred</span></code>
 above is a reference to an object,
you could think of the method call as just another form of
dereferencing.</p>
<p>Whatever is on the left side of the arrow, whether a reference or a
class name, is passed to the method subroutine as its first argument.
So the above code is mostly equivalent to:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$fred</span> = <span class="i">Critter::find</span><span class="s">(</span><span class="q">&quot;Critter&quot;</span><span class="cm">,</span> <span class="q">&quot;Fred&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">Critter::display</span><span class="s">(</span><span class="i">$fred</span><span class="cm">,</span> <span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>How does Perl know which package the subroutine is in?  By looking at
the left side of the arrow, which must be either a package name or a
reference to an object, i.e. something that has been blessed to a
package.  Either way, that's the package where Perl starts looking.  If
that package has no subroutine with that name, Perl starts looking for
it in any base classes of that package, and so on.</p>
<p>If you need to, you <i>can</i> force Perl to start looking in some other package:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$barney</span> = <span class="w">MyCritter</span><span class="w">-&gt;Critter::find</span><span class="s">(</span><span class="q">&quot;Barney&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$barney</span><span class="i">-&gt;Critter::display</span><span class="s">(</span><span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>Here <code class="inline"><span class="w">MyCritter</span></code>
 is presumably a subclass of <code class="inline"><span class="w">Critter</span></code>
 that defines
its own versions of find() and display().  We haven't specified what
those methods do, but that doesn't matter above since we've forced Perl
to start looking for the subroutines in <code class="inline"><span class="w">Critter</span></code>
.</p>
<p>As a special case of the above, you may use the <code class="inline"><span class="w">SUPER</span></code>
 pseudo-class to
tell Perl to start looking for the method in the packages named in the
current class's <code class="inline"><span class="i">@ISA</span></code>
 list.  
</p>
<pre class="verbatim"><ol><li><a name="package-MyCritter"></a>    package <span class="i">MyCritter</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Critter&#39;</span><span class="sc">;</span>    <span class="c"># sets @MyCritter::ISA = (&#39;Critter&#39;);</span></li><li></li><li><a name="display"></a>    sub <span class="m">display</span> <span class="s">{</span> </li><li>        <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$self</span><span class="cm">,</span> <span class="i">@args</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span></li><li>        <span class="i">$self</span><span class="i">-&gt;SUPER::display</span><span class="s">(</span><span class="q">&quot;Name&quot;</span><span class="cm">,</span> <span class="i">@args</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>It is important to note that <code class="inline"><span class="w">SUPER</span></code>
 refers to the superclass(es) of the
<i>current package</i> and not to the superclass(es) of the object. Also, the
<code class="inline"><span class="w">SUPER</span></code>
 pseudo-class can only currently be used as a modifier to a method
name, but not in any of the other ways that class names are normally used,
eg:
</p>
<pre class="verbatim"><ol><li>    <span class="w">something</span><span class="w">-&gt;SUPER::method</span><span class="s">(</span>...<span class="s">)</span><span class="sc">;</span>	<span class="c"># OK</span></li><li>    <span class="i">SUPER::method</span><span class="s">(</span>...<span class="s">)</span><span class="sc">;</span>			<span class="c"># WRONG</span></li><li>    <span class="w">SUPER</span><span class="w">-&gt;method</span><span class="s">(</span>...<span class="s">)</span><span class="sc">;</span>			<span class="c"># WRONG</span></li></ol></pre><p>Instead of a class name or an object reference, you can also use any
expression that returns either of those on the left side of the arrow.
So the following statement is valid:</p>
<pre class="verbatim"><ol><li>    <span class="w">Critter</span><span class="w">-&gt;find</span><span class="s">(</span><span class="q">&quot;Fred&quot;</span><span class="s">)</span><span class="i">-&gt;display</span><span class="s">(</span><span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>and so is the following:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$fred</span> = <span class="s">(</span><a class="l_k" href="functions/reverse.html">reverse</a> <span class="q">&quot;rettirC&quot;</span><span class="s">)</span><span class="i">-&gt;find</span><span class="s">(</span><a class="l_k" href="functions/reverse.html">reverse</a> <span class="q">&quot;derF&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The right side of the arrow typically is the method name, but a simple 
scalar variable containing either the method name or a subroutine 
reference can also be used.</p>
<p>If the right side of the arrow is a scalar containing a reference
to a subroutine, then this is equivalent to calling the referenced
subroutine directly with the class name or object on the left side
of the arrow as its first argument. No lookup is done and there is
no requirement that the subroutine be defined in any package related
to the class name or object on the left side of the arrow.</p>
<p>For example, the following calls to $display are equivalent:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/my.html">my</a> <span class="i">$display</span> = <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span> ... <span class="s">}</span><span class="sc">;</span></li><li>    <span class="i">$fred</span><span class="i">-&gt;$display</span><span class="s">(</span><span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$display</span>-&gt;<span class="s">(</span><span class="i">$fred</span><span class="cm">,</span> <span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head2' id="Indirect-Object-Syntax"></a><h3 class='h3' >Indirect Object Syntax
  </h3>
<p>The other way to invoke a method is by using the so-called "indirect
object" notation.  This syntax was available in Perl 4 long before
objects were introduced, and is still used with filehandles like this:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/print.html">print</a> <span class="i">STDERR</span> <span class="q">&quot;help!!!\n&quot;</span><span class="sc">;</span></li></ol></pre><p>The same syntax can be used to call either object or class methods.</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">$fred</span> = <span class="w">find</span> <span class="w">Critter</span> <span class="q">&quot;Fred&quot;</span><span class="sc">;</span></li><li>   <span class="w">display</span> <span class="i">$fred</span> <span class="q">&quot;Height&quot;</span><span class="cm">,</span> <span class="q">&quot;Weight&quot;</span><span class="sc">;</span></li></ol></pre><p>Notice that there is no comma between the object or class name and the
parameters.  This is how Perl can tell you want an indirect method call
instead of an ordinary subroutine call.</p>
<p>But what if there are no arguments?  In that case, Perl must guess what
you want.  Even worse, it must make that guess <i>at compile time</i>.
Usually Perl gets it right, but when it doesn't you get a function
call compiled as a method, or vice versa.  This can introduce subtle bugs
that are hard to detect.</p>
<p>For example, a call to a method <code class="inline"><span class="w">new</span></code>
 in indirect notation (as C++
programmers are wont to make) can be miscompiled into a subroutine
call if there's already a <code class="inline"><span class="w">new</span></code>
 function in scope.  You'd end up
calling the current package's <code class="inline"><span class="w">new</span></code>
 as a subroutine, rather than the
desired class's method.  The compiler tries to cheat by remembering
bareword <code class="inline"><a class="l_k" href="functions/require.html">require</a></code>s, but the grief when it messes up just isn't worth the
years of debugging it will take you to track down such subtle bugs.</p>
<p>There is another problem with this syntax: the indirect object is
limited to a name, a scalar variable, or a block, because it would have
to do too much lookahead otherwise, just like any other postfix
dereference in the language.  (These are the same quirky rules as are
used for the filehandle slot in functions like <code class="inline"><a class="l_k" href="functions/print.html">print</a></code> and <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code>.)
This can lead to horribly confusing precedence problems, as in these
next two lines:</p>
<pre class="verbatim"><ol><li>    <span class="w">move</span> <span class="i">$obj</span>-&gt;{<span class="w">FIELD</span>}<span class="sc">;</span>                 <span class="c"># probably wrong!</span></li><li>    <span class="w">move</span> <span class="i">$ary</span>[<span class="i">$i</span>]<span class="sc">;</span>                      <span class="c"># probably wrong!</span></li></ol></pre><p>Those actually parse as the very surprising:</p>
<pre class="verbatim"><ol><li>    <span class="i">$obj</span><span class="i">-&gt;move</span>-&gt;{<span class="w">FIELD</span>}<span class="sc">;</span>                <span class="c"># Well, lookee here</span></li><li>    <span class="i">$ary</span><span class="i">-&gt;move</span><span class="s">(</span><span class="s">[</span><span class="i">$i</span><span class="s">]</span><span class="s">)</span><span class="sc">;</span>                   <span class="c"># Didn&#39;t expect this one, eh?</span></li></ol></pre><p>Rather than what you might have expected:</p>
<pre class="verbatim"><ol><li>    <span class="i">$obj</span>-&gt;{<span class="w">FIELD</span>}<span class="i">-&gt;move</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>              <span class="c"># You should be so lucky.</span></li><li>    <span class="i">$ary</span>[<span class="i">$i</span>]<span class="i">-&gt;move</span><span class="sc">;</span>                     <span class="c"># Yeah, sure.</span></li></ol></pre><p>To get the correct behavior with indirect object syntax, you would have
to use a block around the indirect object:</p>
<pre class="verbatim"><ol><li>    <span class="i">move</span> <span class="s">{</span><span class="i">$obj</span>-&gt;{<span class="w">FIELD</span>}<span class="s">}</span><span class="sc">;</span></li><li>    <span class="i">move</span> <span class="s">{</span><span class="i">$ary</span>[<span class="i">$i</span>]<span class="s">}</span><span class="sc">;</span></li></ol></pre><p>Even then, you still have the same potential problem if there happens to
be a function named <code class="inline"><span class="w">move</span></code>
 in the current package.  <strong>The <code class="inline">-&gt;</code>

notation suffers from neither of these disturbing ambiguities, so we
recommend you use it exclusively.</strong>  However, you may still end up having
to read code using the indirect object notation, so it's important to be
familiar with it.</p>
<a class='view-head2' id="Default-UNIVERSAL-methods"></a><h3 class='h3' >Default UNIVERSAL methods
</h3>
<p>The <code class="inline"><span class="w">UNIVERSAL</span></code>
 package automatically contains the following methods that
are inherited by all other classes:</p>
<ul>
<li><a class='view-title' id="isa(CLASS)"></a><strong>isa(CLASS)
</strong>
<p><code class="inline"><span class="w">isa</span></code>
 returns <i>true</i> if its object is blessed into a subclass of <code class="inline"><span class="w">CLASS</span></code>
</p>
</li>
<li><a class='view-title' id="DOES(ROLE)"></a><strong>DOES(ROLE)
</strong>
<p><code class="inline"><span class="w">DOES</span></code>
 returns <i>true</i> if its object claims to perform the role <code class="inline"><span class="w">ROLE</span></code>
.  By
default, this is equivalent to <code class="inline"><span class="w">isa</span></code>
.</p>
</li>
<li><a class='view-title' id="can(METHOD)"></a><strong>can(METHOD)
</strong>
<p><code class="inline"><span class="w">can</span></code>
 checks to see if its object has a method called <code class="inline"><span class="w">METHOD</span></code>
,
if it does then a reference to the sub is returned, if it does not then
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> is returned.</p>
</li>
<li><a class='view-title' id="VERSION(-%5bNEED%5d-)"></a><strong>VERSION( [NEED] )
</strong>
<p><code class="inline"><span class="w">VERSION</span></code>
 returns the version number of the class (package).  If the
NEED argument is given then it will check that the current version (as
defined by the $VERSION variable in the given package) not less than
NEED; it will die if this is not the case.  This method is called automatically
by the <code class="inline"><span class="w">VERSION</span></code>
 form of <code class="inline"><a class="l_k" href="functions/use.html">use</a></code>.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/use.html">use</a> <span class="w">Package</span> <span class="n">1.2</span> <span class="q">qw(some imported subs)</span><span class="sc">;</span></li><li>    <span class="c"># implies:</span></li><li>    <span class="w">Package</span><span class="w">-&gt;VERSION</span><span class="s">(</span><span class="n">1.2</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
</ul>
<a class='view-head2' id="Destructors"></a><h3 class='h3' >Destructors
 </h3>
<p>When the last reference to an object goes away, the object is
automatically destroyed.  (This may even be after you exit, if you've
stored references in global variables.)  If you want to capture control
just before the object is freed, you may define a DESTROY method in
your class.  It will automatically be called at the appropriate moment,
and you can do any extra cleanup you need to do.  Perl passes a reference
to the object under destruction as the first (and only) argument.  Beware
that the reference is a read-only value, and cannot be modified by
manipulating <code class="inline"><span class="i">$_</span>[<span class="n">0</span>]</code>
 within the destructor.  The object itself (i.e.
the thingy the reference points to, namely <code class="inline"><span class="i">$</span>{<span class="i">$_</span>[<span class="n">0</span>]}</code>
, <code class="inline"><span class="i">@</span>{<span class="i">$_</span>[<span class="n">0</span>]}</code>
, 
<code class="inline"><span class="i">%</span>{<span class="i">$_</span>[<span class="n">0</span>]}</code>
 etc.) is not similarly constrained.</p>
<p>Since DESTROY methods can be called at unpredictable times, it is
important that you localise any global variables that the method may
update.  In particular, localise <code class="inline"><span class="i">$@</span></code>
 if you use <code class="inline"><a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span><span class="s">}</span></code>
 and
localise <code class="inline"><span class="i">$?</span></code>
 if you use <code class="inline"><a class="l_k" href="functions/system.html">system</a></code> or backticks.</p>
<p>If you arrange to re-bless the reference before the destructor returns,
perl will again call the DESTROY method for the re-blessed object after
the current one returns.  This can be used for clean delegation of
object destruction, or for ensuring that destructors in the base classes
of your choosing get called.  Explicitly calling DESTROY is also possible,
but is usually never needed.</p>
<p>DESTROY is subject to AUTOLOAD lookup, just like any other method. Hence, if
your class has an AUTOLOAD method, but does not need any DESTROY actions,
you probably want to provide a DESTROY method anyway, to prevent an
expensive call to AUTOLOAD each time an object is freed. As this technique
makes empty DESTROY methods common, the implementation is optimised so that
a DESTROY method that is an empty or constant subroutine, and hence could
have no side effects anyway, is not actually called.
 </p>
<p>Do not confuse the previous discussion with how objects <i>CONTAINED</i> in the current
one are destroyed.  Such objects will be freed and destroyed automatically
when the current object is freed, provided no other references to them exist
elsewhere.</p>
<a class='view-head2' id="Summary"></a><h3 class='h3' >Summary</h3>
<p>That's about all there is to it.  Now you need just to go off and buy a
book about object-oriented design methodology, and bang your forehead
with it for the next six months or so.</p>
<a class='view-head2' id="Two-Phased-Garbage-Collection"></a><h3 class='h3' >Two-Phased Garbage Collection
  
  </h3>
<p>For most purposes, Perl uses a fast and simple, reference-based
garbage collection system.  That means there's an extra
dereference going on at some level, so if you haven't built
your Perl executable using your C compiler's <code class="inline">-O</code>
 flag, performance
will suffer.  If you <i>have</i> built Perl with <code class="inline"><span class="w">cc</span> -O</code>
, then this
probably won't matter.</p>
<p>A more serious concern is that unreachable memory with a non-zero
reference count will not normally get freed.  Therefore, this is a bad
idea:</p>
<pre class="verbatim"><ol><li>    <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$a</span><span class="sc">;</span></li><li>	<span class="i">$a</span> = \<span class="i">$a</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Even thought $a <i>should</i> go away, it can't.  When building recursive data
structures, you'll have to break the self-reference yourself explicitly
if you don't care to leak.  For example, here's a self-referential
node such as one might use in a sophisticated tree structure:</p>
<pre class="verbatim"><ol><li><a name="new_node"></a>    sub <span class="m">new_node</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$class</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$node</span>  = <span class="s">{</span><span class="s">}</span><span class="sc">;</span></li><li>	<span class="i">$node</span>-&gt;{<span class="w">LEFT</span>} = <span class="i">$node</span>-&gt;{<span class="w">RIGHT</span>} = <span class="i">$node</span><span class="sc">;</span></li><li>	<span class="i">$node</span>-&gt;{<span class="w">DATA</span>} = <span class="s">[</span> <span class="i">@_</span> <span class="s">]</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/bless.html">bless</a> <span class="i">$node</span> <span class="cm">=&gt;</span> <span class="i">$class</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>If you create nodes like that, they (currently) won't go away unless you
break their self reference yourself.  (In other words, this is not to be
construed as a feature, and you shouldn't depend on it.)</p>
<p>Almost.</p>
<p>When an interpreter thread finally shuts down (usually when your program
exits), then a rather costly but complete mark-and-sweep style of garbage
collection is performed, and everything allocated by that thread gets
destroyed.  This is essential to support Perl as an embedded or a
multithreadable language.  For example, this program demonstrates Perl's
two-phased garbage collection:</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/bin/perl</span></li><li><a name="package-Subtle"></a>    package <span class="i">Subtle</span><span class="sc">;</span></li><li></li><li><a name="new"></a>    sub <span class="m">new</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$test</span><span class="sc">;</span></li><li>	<span class="i">$test</span> = \<span class="i">$test</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;CREATING &quot;</span> . \<span class="i">$test</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/return.html">return</a> <a class="l_k" href="functions/bless.html">bless</a> \<span class="i">$test</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="DESTROY"></a>    sub <span class="m">DESTROY</span> <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$self</span> = <a class="l_k" href="functions/shift.html">shift</a><span class="sc">;</span></li><li>	<a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;DESTROYING $self&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li><a name="package-main"></a>    package <span class="i">main</span><span class="sc">;</span></li><li></li><li>    <a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;starting program&quot;</span><span class="sc">;</span></li><li>    <span class="s">{</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$a</span> = <span class="w">Subtle</span><span class="w">-&gt;new</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/my.html">my</a> <span class="i">$b</span> = <span class="w">Subtle</span><span class="w">-&gt;new</span><span class="sc">;</span></li><li>	<span class="i">$$a</span> = <span class="n">0</span><span class="sc">;</span>  <span class="c"># break selfref</span></li><li>	<a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;leaving block&quot;</span><span class="sc">;</span></li><li>    <span class="s">}</span></li><li></li><li>    <a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;just exited block&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/warn.html">warn</a> <span class="q">&quot;time to die...&quot;</span><span class="sc">;</span></li><li>    <a class="l_k" href="functions/exit.html">exit</a><span class="sc">;</span></li></ol></pre><p>When run as <i>/foo/test</i>, the following output is produced:</p>
<pre class="verbatim"><ol><li>    <span class="w">starting</span> <span class="w">program</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">18.</span></li><li>    <span class="w">CREATING</span> <span class="i">SCALAR</span><span class="s">(</span><span class="n">0x8e5b8</span><span class="s">)</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">7.</span></li><li>    <span class="w">CREATING</span> <span class="i">SCALAR</span><span class="s">(</span><span class="n">0x8e57c</span><span class="s">)</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">7.</span></li><li>    <span class="w">leaving</span> <span class="w">block</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">23.</span></li><li>    <span class="w">DESTROYING</span> <span class="w">Subtle</span>=<span class="i">SCALAR</span><span class="s">(</span><span class="n">0x8e5b8</span><span class="s">)</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">13.</span></li><li>    <span class="w">just</span> <span class="w">exited</span> <span class="w">block</span> <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">26.</span></li><li>    <a class="l_k" href="functions/time.html">time</a> <span class="w">to</span> <a class="l_k" href="functions/die.html">die</a>... <span class="w">at</span> /<span class="w">foo</span>/<span class="w">test</span> <span class="w">line</span> <span class="n">27.</span></li><li>    <span class="w">DESTROYING</span> <span class="w">Subtle</span>=<span class="i">SCALAR</span><span class="s">(</span><span class="n">0x8e57c</span><span class="s">)</span> <span class="w">during</span> <span class="w">global</span> <span class="w">destruction</span>.</li></ol></pre><p>Notice that "global destruction" bit there?  That's the thread
garbage collector reaching the unreachable.</p>
<p>Objects are always destructed, even when regular refs aren't.  Objects
are destructed in a separate pass before ordinary refs just to 
prevent object destructors from using refs that have been themselves
destructed.  Plain refs are only garbage-collected if the destruct level
is greater than 0.  You can test the higher levels of global destruction
by setting the PERL_DESTRUCT_LEVEL environment variable, presuming
<code class="inline">-<span class="w">DDEBUGGING</span></code>
 was enabled during perl build time.
See <a href="perlhack.html#PERL_DESTRUCT_LEVEL">PERL_DESTRUCT_LEVEL in perlhack</a> for more information.</p>
<p>A more complete garbage collection strategy will be implemented
at a future date.</p>
<p>In the meantime, the best solution is to create a non-recursive container
class that holds a pointer to the self-referential data structure.
Define a DESTROY method for the containing object's class that manually
breaks the circularities in the self-referential structure.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p>A kinder, gentler tutorial on object-oriented programming in Perl can
be found in <a href="perltoot.html">perltoot</a>, <a href="perlboot.html">perlboot</a> and <a href="perltooc.html">perltooc</a>.  You should
also check out <a href="perlbot.html">perlbot</a> for other object tricks, traps, and tips, as
well as <a href="perlmodlib.html">perlmodlib</a> for some style guides on constructing both
modules and classes.</p>




      <ul><li><a href="#NAME">NAME
 </a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#An-Object-is-Simply-a-Reference">An Object is Simply a Reference
   </a></li><li><a href="#A-Class-is-Simply-a-Package">A Class is Simply a Package
   </a></li><li><a href="#A-Method-is-Simply-a-Subroutine">A Method is Simply a Subroutine
</a></li><li><a href="#Method-Invocation">Method Invocation
   </a></li><li><a href="#Indirect-Object-Syntax">Indirect Object Syntax
  </a></li><li><a href="#Default-UNIVERSAL-methods">Default UNIVERSAL methods
</a></li><li><a href="#Destructors">Destructors
 </a></li><li><a href="#Summary">Summary</a></li><li><a href="#Two-Phased-Garbage-Collection">Two-Phased Garbage Collection
  
  </a></li></ul><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.12.2/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.12.2/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.12.2/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
