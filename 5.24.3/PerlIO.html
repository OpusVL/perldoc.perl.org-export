      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="PerlIO - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>PerlIO - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/PerlIO.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.24.3/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.24.3/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.24.3/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.24.3/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.24.3/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.24.3/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-modules-P.html">Core modules (P)</a> &gt;
      
    
    PerlIO
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 24.3
                        documentation</h7>
                    </div>
                    <h1>PerlIO</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Custom-Layers">Custom Layers</a></li><li><a href="#Alternatives-to-raw">Alternatives to raw</a></li><li><a href="#Defaults-and-how-to-override-them">Defaults and how to override them</a></li><li><a href="#Querying-the-layers-of-filehandles">Querying the layers of filehandles</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>PerlIO - On demand loader for PerlIO layers and root of PerlIO::* name space</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&lt;:crlf&quot;</span><span class="cm">,</span> <span class="q">&quot;my.txt&quot;</span><span class="s">)</span><span class="sc">;</span> <span class="c"># support platform-native and </span></li><li>                                 <span class="c"># CRLF text files</span></li><li></li><li>  <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&lt;&quot;</span><span class="cm">,</span> <span class="q">&quot;his.jpg&quot;</span><span class="s">)</span><span class="sc">;</span> <span class="c"># portably open a binary file for reading</span></li><li>  <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$fh</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="j">Shell:</span></li><li>    <span class="w">PERLIO</span>=<span class="w">perlio</span> <span class="w">perl</span> ....</li></ol></pre><a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>When an undefined layer 'foo' is encountered in an <code class="inline"><a class="l_k" href="functions/open.html">open</a></code> or
<code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> layer specification then C code performs the equivalent of:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/use.html">use</a> <span class="w">PerlIO</span> <span class="q">&#39;foo&#39;</span><span class="sc">;</span></li></ol></pre><p>The perl code in PerlIO.pm then attempts to locate a layer by doing</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="functions/require.html">require</a> <span class="w">PerlIO::foo</span><span class="sc">;</span></li></ol></pre><p>Otherwise the <code class="inline"><span class="w">PerlIO</span></code>
 package is a place holder for additional
PerlIO related functions.</p>
<p>The following layers are currently defined:</p>
<ul>
<li><a class='view-title' id="%3aunix"></a><strong>:unix</strong>
<p>Lowest level layer which provides basic PerlIO operations in terms of
UNIX/POSIX numeric file descriptor calls
(open(), read(), write(), lseek(), close()).</p>
</li>
<li><a class='view-title' id="%3astdio"></a><strong>:stdio</strong>
<p>Layer which calls <code class="inline"><span class="w">fread</span></code>
, <code class="inline"><span class="w">fwrite</span></code>
 and <code class="inline"><span class="w">fseek</span></code>
/<code class="inline"><span class="w">ftell</span></code>
 etc.  Note
that as this is "real" stdio it will ignore any layers beneath it and
go straight to the operating system via the C library as usual.</p>
</li>
<li><a class='view-title' id="%3aperlio"></a><strong>:perlio</strong>
<p>A from scratch implementation of buffering for PerlIO. Provides fast
access to the buffer for <code class="inline"><span class="w">sv_gets</span></code>
 which implements perl's readline/&lt;&gt;
and in general attempts to minimize data copying.</p>
<p><code class="inline"><span class="j">:</span><span class="w">perlio</span></code>
 will insert a <code class="inline"><span class="j">:</span><span class="w">unix</span></code>
 layer below itself to do low level IO.</p>
</li>
<li><a class='view-title' id="%3acrlf"></a><strong>:crlf</strong>
<p>A layer that implements DOS/Windows like CRLF line endings.  On read
converts pairs of CR,LF to a single "\n" newline character.  On write
converts each "\n" to a CR,LF pair.  Note that this layer will silently
refuse to be pushed on top of itself.</p>
<p>It currently does <i>not</i> mimic MS-DOS as far as treating of Control-Z
as being an end-of-file marker.</p>
<p>Based on the <code class="inline"><span class="j">:</span><span class="w">perlio</span></code>
 layer.</p>
</li>
<li><a class='view-title' id="%3autf8"></a><strong>:utf8</strong>
<p>Declares that the stream accepts perl's <i>internal</i> encoding of
characters.  (Which really is UTF-8 on ASCII machines, but is
UTF-EBCDIC on EBCDIC machines.)  This allows any character perl can
represent to be read from or written to the stream. The UTF-X encoding
is chosen to render simple text parts (i.e.  non-accented letters,
digits and common punctuation) human readable in the encoded file.</p>
<p>(<strong>CAUTION</strong>: This layer does not validate byte sequences.  For reading input,
you should instead use <code class="inline"><span class="j">:</span><span class="i">encoding</span><span class="s">(</span><span class="w">utf8</span><span class="s">)</span></code>
 instead of bare <code class="inline"><span class="j">:</span><span class="w">utf8</span></code>
.)</p>
<p>Here is how to write your native data out using UTF-8 (or UTF-EBCDIC)
and then read it back in.</p>
<pre class="verbatim"><ol><li>	<a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">F</span><span class="cm">,</span> <span class="q">&quot;&gt;:utf8&quot;</span><span class="cm">,</span> <span class="q">&quot;data.utf&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/print.html">print</a> <span class="i">F</span> <span class="i">$out</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">F</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>	<a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">F</span><span class="cm">,</span> <span class="q">&quot;&lt;:utf8&quot;</span><span class="cm">,</span> <span class="q">&quot;data.utf&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>	<span class="i">$in</span> = <span class="q">&lt;F&gt;</span><span class="sc">;</span></li><li>	<a class="l_k" href="functions/close.html">close</a><span class="s">(</span><span class="w">F</span><span class="s">)</span><span class="sc">;</span></li></ol></pre></li>
<li><a class='view-title' id="%3abytes"></a><strong>:bytes</strong>
<p>This is the inverse of the <code class="inline"><span class="j">:</span><span class="w">utf8</span></code>
 layer. It turns off the flag
on the layer below so that data read from it is considered to
be "octets" i.e. characters in the range 0..255 only. Likewise
on output perl will warn if a "wide" character is written
to a such a stream.</p>
</li>
<li><a class='view-title' id="%3araw"></a><strong>:raw</strong>
<p>The <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 layer is <i>defined</i> as being identical to calling
<code class="inline"><a class="l_k" href="functions/binmode.html">binmode($fh)</a></code> - the stream is made suitable for passing binary data,
i.e. each byte is passed as-is. The stream will still be
buffered.</p>
<p>In Perl 5.6 and some books the <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 layer (previously sometimes also
referred to as a "discipline") is documented as the inverse of the
<code class="inline"><span class="j">:</span><span class="w">crlf</span></code>
 layer. That is no longer the case - other layers which would
alter the binary nature of the stream are also disabled.  If you want UNIX
line endings on a platform that normally does CRLF translation, but still
want UTF-8 or encoding defaults, the appropriate thing to do is to add
<code class="inline"><span class="j">:</span><span class="w">perlio</span></code>
 to the PERLIO environment variable.</p>
<p>The implementation of <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 is as a pseudo-layer which when "pushed"
pops itself and then any layers which do not declare themselves as suitable
for binary data. (Undoing :utf8 and :crlf are implemented by clearing
flags rather than popping layers but that is an implementation detail.)</p>
<p>As a consequence of the fact that <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
 normally pops layers,
it usually only makes sense to have it as the only or first element in
a layer specification.  When used as the first element it provides
a known base on which to build e.g.</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;:raw:utf8&quot;</span><span class="cm">,</span>...<span class="s">)</span></li></ol></pre><p>will construct a "binary" stream, but then enable UTF-8 translation.</p>
</li>
<li><a class='view-title' id="%3apop"></a><strong>:pop</strong>
<p>A pseudo layer that removes the top-most layer. Gives perl code a
way to manipulate the layer stack.  Note that <code class="inline"><span class="j">:</span><a class="l_k" href="functions/pop.html">pop</a></code>
 only works on
real layers and will not undo the effects of pseudo layers like
<code class="inline"><span class="j">:</span><span class="w">utf8</span></code>
.  An example of a possible use might be:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span>...<span class="s">)</span></li><li>    ...</li><li>    <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;:encoding(...)&quot;</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># next chunk is encoded</span></li><li>    ...</li><li>    <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;:pop&quot;</span><span class="s">)</span><span class="sc">;</span>            <span class="c"># back to un-encoded</span></li></ol></pre><p>A more elegant (and safer) interface is needed.</p>
</li>
<li><a class='view-title' id="%3awin32"></a><strong>:win32</strong>
<p>On Win32 platforms this <i>experimental</i> layer uses the native "handle" IO
rather than the unix-like numeric file descriptor layer. Known to be
buggy as of perl 5.8.2.</p>
</li>
</ul>
<a class='view-head2' id="Custom-Layers"></a><h3 class='h3' >Custom Layers</h3>
<p>It is possible to write custom layers in addition to the above builtin
ones, both in C/XS and Perl.  Two such layers (and one example written
in Perl using the latter) come with the Perl distribution.</p>
<ul>
<li><a class='view-title' id="%3aencoding"></a><strong>:encoding</strong>
<p>Use <code class="inline"><span class="j">:</span><span class="i">encoding</span><span class="s">(</span><span class="w">ENCODING</span><span class="s">)</span></code>
 either in open() or binmode() to install
a layer that transparently does character set and encoding transformations,
for example from Shift-JIS to Unicode.  Note that under <code class="inline"><span class="w">stdio</span></code>

an <code class="inline"><span class="j">:</span><span class="w">encoding</span></code>
 also enables <code class="inline"><span class="j">:</span><span class="w">utf8</span></code>
.  See <a href="PerlIO/encoding.html">PerlIO::encoding</a>
for more information.</p>
</li>
<li><a class='view-title' id="%3ammap"></a><strong>:mmap</strong>
<p>A layer which implements "reading" of files by using <code class="inline"><span class="i">mmap</span><span class="s">(</span><span class="s">)</span></code>
 to
make a (whole) file appear in the process's address space, and then
using that as PerlIO's "buffer". This <i>may</i> be faster in certain
circumstances for large files, and may result in less physical memory
use when multiple processes are reading the same file.</p>
<p>Files which are not <code class="inline"><span class="i">mmap</span><span class="s">(</span><span class="s">)</span></code>
-able revert to behaving like the <code class="inline"><span class="j">:</span><span class="w">perlio</span></code>

layer. Writes also behave like the <code class="inline"><span class="j">:</span><span class="w">perlio</span></code>
 layer, as <code class="inline"><span class="i">mmap</span><span class="s">(</span><span class="s">)</span></code>
 for write
needs extra house-keeping (to extend the file) which negates any advantage.</p>
<p>The <code class="inline"><span class="j">:</span><span class="w">mmap</span></code>
 layer will not exist if the platform does not support <code class="inline"><span class="i">mmap</span><span class="s">(</span><span class="s">)</span></code>
.</p>
</li>
<li><a class='view-title' id="%3avia"></a><strong>:via</strong>
<p>Use <code class="inline"><span class="j">:</span><span class="i">via</span><span class="s">(</span><span class="w">MODULE</span><span class="s">)</span></code>
 either in open() or binmode() to install a layer
that does whatever transformation (for example compression /
decompression, encryption / decryption) to the filehandle.
See <a href="PerlIO/via.html">PerlIO::via</a> for more information.</p>
</li>
</ul>
<a class='view-head2' id="Alternatives-to-raw"></a><h3 class='h3' >Alternatives to raw</h3>
<p>To get a binary stream an alternate method is to use:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;whatever&quot;</span><span class="s">)</span></li><li>    <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$fh</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>this has the advantage of being backward compatible with how such things have
had to be coded on some platforms for years.</p>
<p>To get an unbuffered stream specify an unbuffered layer (e.g. <code class="inline"><span class="j">:</span><span class="w">unix</span></code>
)
in the open call:</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span><span class="q">&quot;&lt;:unix&quot;</span><span class="cm">,</span><span class="i">$path</span><span class="s">)</span></li></ol></pre><a class='view-head2' id="Defaults-and-how-to-override-them"></a><h3 class='h3' >Defaults and how to override them</h3>
<p>If the platform is MS-DOS like and normally does CRLF to "\n"
translation for text files then the default layers are :</p>
<pre class="verbatim"><ol><li>  <span class="w">unix</span> <span class="w">crlf</span></li></ol></pre><p>(The low level "unix" layer may be replaced by a platform specific low
level layer.)</p>
<p>Otherwise if <code class="inline"><span class="w">Configure</span></code>
 found out how to do "fast" IO using the system's
stdio, then the default layers are:</p>
<pre class="verbatim"><ol><li>  <span class="w">unix</span> <span class="w">stdio</span></li></ol></pre><p>Otherwise the default layers are</p>
<pre class="verbatim"><ol><li>  <span class="w">unix</span> <span class="w">perlio</span></li></ol></pre><p>These defaults may change once perlio has been better tested and tuned.</p>
<p>The default can be overridden by setting the environment variable
PERLIO to a space separated list of layers (<code class="inline"><span class="w">unix</span></code>
 or platform low
level layer is always pushed first).</p>
<p>This can be used to see the effect of/bugs in the various layers e.g.</p>
<pre class="verbatim"><ol><li>  <span class="w">cd</span> ...<span class="q">/perl/</span><span class="w">t</span></li><li>  <span class="w">PERLIO</span>=<span class="w">stdio</span>  .<span class="q">/perl harness</span></li><li>  <span class="q">  PERLIO=perlio ./perl</span> <span class="w">harness</span></li></ol></pre><p>For the various values of PERLIO see <a href="perlrun.html#PERLIO">PERLIO in perlrun</a>.</p>
<a class='view-head2' id="Querying-the-layers-of-filehandles"></a><h3 class='h3' >Querying the layers of filehandles</h3>
<p>The following returns the <strong>names</strong> of the PerlIO layers on a filehandle.</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@layers</span> = <span class="i">PerlIO::get_layers</span><span class="s">(</span><span class="i">$fh</span><span class="s">)</span><span class="sc">;</span> <span class="c"># Or FH, *FH, &quot;FH&quot;.</span></li></ol></pre><p>The layers are returned in the order an open() or binmode() call would
use them.  Note that the "default stack" depends on the operating
system and on the Perl version, and both the compile-time and
runtime configurations of Perl.</p>
<p>The following table summarizes the default layers on UNIX-like and
DOS-like platforms and depending on the setting of <code class="inline"><span class="i">$ENV</span>{<span class="w">PERLIO</span>}</code>
:</p>
<pre class="verbatim"><ol><li> <span class="w">PERLIO</span>     <span class="w">UNIX</span>-<span class="w">like</span>                   <span class="w">DOS</span>-<span class="w">like</span></li><li> ------     ---------                   --------</li><li> <span class="w">unset</span> <span class="q">/ &quot;&quot; unix perlio /</span> <span class="w">stdio</span> <span class="s">[</span><span class="n">1</span><span class="s">]</span>     <span class="w">unix</span> <span class="w">crlf</span></li><li> <span class="w">stdio</span>      <span class="w">unix</span> <span class="w">perlio</span> / <span class="w">stdio</span> <span class="s">[</span><span class="n">1</span><span class="s">]</span>     <span class="w">stdio</span></li><li> <span class="w">perlio</span>     <span class="w">unix</span> <span class="w">perlio</span>                 <span class="w">unix</span> <span class="w">perlio</span></li><li></li><li> <span class="c"># [1] &quot;stdio&quot; if Configure found out how to do &quot;fast stdio&quot; (depends</span></li><li> <span class="c"># on the stdio implementation) and in Perl 5.8, otherwise &quot;unix perlio&quot;</span></li></ol></pre><p>By default the layers from the input side of the filehandle are
returned; to get the output side, use the optional <code class="inline"><span class="w">output</span></code>
 argument:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@layers</span> = <span class="i">PerlIO::get_layers</span><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="w">output</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>(Usually the layers are identical on either side of a filehandle but
for example with sockets there may be differences, or if you have
been using the <code class="inline"><a class="l_k" href="functions/open.html">open</a></code> pragma.)</p>
<p>There is no set_layers(), nor does get_layers() return a tied array
mirroring the stack, or anything fancy like that.  This is not
accidental or unintentional.  The PerlIO layer stack is a bit more
complicated than just a stack (see for example the behaviour of <code class="inline"><span class="j">:</span><span class="w">raw</span></code>
).
You are supposed to use open() and binmode() to manipulate the stack.</p>
<p><strong>Implementation details follow, please close your eyes.</strong></p>
<p>The arguments to layers are by default returned in parentheses after
the name of the layer, and certain layers (like <code class="inline"><span class="w">utf8</span></code>
) are not real
layers but instead flags on real layers; to get all of these returned
separately, use the optional <code class="inline"><span class="w">details</span></code>
 argument:</p>
<pre class="verbatim"><ol><li>   <a class="l_k" href="functions/my.html">my</a> <span class="i">@layer_and_args_and_flags</span> = <span class="i">PerlIO::get_layers</span><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="w">details</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><p>The result will be up to be three times the number of layers:
the first element will be a name, the second element the arguments
(unspecified arguments will be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>), the third element the flags,
the fourth element a name again, and so forth.</p>
<p><strong>You may open your eyes now.</strong></p>
<a class='view-head1' id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Nick Ing-Simmons &lt;nick@ing-simmons.net&gt;</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p><a class='function-name' href="functions/binmode.html">binmode</a>, <a class='function-name' href="functions/open.html">open</a>, <a href="perlunicode.html">perlunicode</a>, <a href="perliol.html">perliol</a>,
<a href="Encode.html">Encode</a></p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Custom-Layers">Custom Layers</a></li><li><a href="#Alternatives-to-raw">Alternatives to raw</a></li><li><a href="#Defaults-and-how-to-override-them">Defaults and how to override them</a></li><li><a href="#Querying-the-layers-of-filehandles">Querying the layers of filehandles</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.24.3/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.24.3/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.24.3/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
