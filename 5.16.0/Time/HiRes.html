      
      
      
      

      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Time::HiRes - perldoc.perl.org">
        <link rel="icon" href="/public/img/favicon.ico">
        <title>Time::HiRes - perldoc.perl.org</title>
        <link href="/public/css/main.min.css" rel="stylesheet">
        <link rel="canonical" href="/Time/HiRes.html">
        <link
          href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900'
          rel='stylesheet' type='text/css'>
        <script>
          window.ga = window.ga || function () {
            (ga.q = ga.q || []).push(arguments)
          };
          ga.l = +new Date;
          ga('create', 'UA-1892152-2', 'auto'); // JJ's account
          ga('create', 'UA-50555-3', 'auto', 'perlOrg'); // perl.org account
          ga('require', 'outboundLinkTracker', {
            events: ['click', 'auxclick', 'contextmenu'],
          });
          ga('require', 'maxScrollTracker');
          ga('send', 'pageview');
          ga('perlOrg.send', 'pageview');
        </script>
        <script async src="https://www.google-analytics.com/analytics.js">
        </script>
        <script async src="/public/js/tracking.min.js"></script>
      </head>

      <body class="body container-fluid ">
        <div class="wrapper">

          <nav
    class="navbar navbar-dark bg-primary bg-perl fixed-top justify-content-between navbar-expand-lg">
    <a href="#content" class="skippy sr-only sr-only-focusable">
        <span class=' skippy-text'>Skip to main content</span>
    </a>
    <a class="navbar-brand" href="/">
        <img class="logo" src="/public/img/logo_perl_doc.svg"
            alt="Perl Documentation Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbar" aria-controls="navbar" aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ">
        <ul class="navbar-nav ml-auto navbar-right">
            <form class="nav-item dropdown search-wrapper">
                <input type="text" id='searchinput' aria-describedby='navbarDropdown5'
                    placeholder="Type query" class='search-input-field' value=''>

                <button href="#" data-toggle='dropdown' type="button"
                    aria-haspopup="true" aria-expanded='false' id="navbarDropdown5"
                    class="nav-link dropdown-toggle search-link">
                    <object tabindex='-1' focusable="false" class='search-icon'
                        data="/public/img/search.svg" type="image/svg+xml"
                        name='search icon'>search
                        icon</object>
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown5"
                    id='search-results'>
                    <p class='dropdown-item major-version'>
                        No results
                    </p>
                </div>
            </form>
            <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <p class='dropdown-item major-version'>
                            5.32
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.32.0/">5.32.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.30
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.30.3/">5.30.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.2/">5.30.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.1/">5.30.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.30.0/">5.30.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.28
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.28.3/">5.28.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.2/">5.28.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.1/">5.28.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.28.0/">5.28.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.26
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.26.3/">5.26.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.2/">5.26.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.1/">5.26.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.26.0/">5.26.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.24
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.24.4/">5.24.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.3/">5.24.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.2/">5.24.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.1/">5.24.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.24.0/">5.24.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.22
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.22.4/">5.22.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.3/">5.22.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.2/">5.22.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.1/">5.22.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.22.0/">5.22.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.20
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.20.3/">5.20.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.2/">5.20.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.1/">5.20.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.20.0/">5.20.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.18
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.18.4/">5.18.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.3/">5.18.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.2/">5.18.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.1/">5.18.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.18.0/">5.18.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.16
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.16.3/">5.16.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.2/">5.16.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.1/">5.16.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.16.0/">5.16.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.14
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.14.4/">5.14.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.3/">5.14.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.2/">5.14.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.1/">5.14.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.14.0/">5.14.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.12
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.12.5/">5.12.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.4/">5.12.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.3/">5.12.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.2/">5.12.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.1/">5.12.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.12.0/">5.12.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.10
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.10.1/">5.10.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.10.0/">5.10.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.8
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.8.9/">5.8.9</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.8/">5.8.8</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.7/">5.8.7</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.6/">5.8.6</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.5/">5.8.5</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.4/">5.8.4</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.3/">5.8.3</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.2/">5.8.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.1/">5.8.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.8.0/">5.8.0</a>
                        
                        
                        <div class="dropdown-divider"></div>
                        
                    
                        <p class='dropdown-item major-version'>
                            5.6
                        </p>
                        
                        <a class='dropdown-item minor-version' href="/5.6.2/">5.6.2</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.1/">5.6.1</a>
                        
                        <a class='dropdown-item minor-version' href="/5.6.0/">5.6.0</a>
                        
                        
                    
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link"
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                    <a class="dropdown-item"
                        href="/5.16.0/index-overview.html">Overview</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-tutorials.html">Tutorials</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-faq.html">FAQs</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-history.html">Changes</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-licence.html">License</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-language.html">Language</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-functions.html">Functions</a>
                    <a class="dropdown-item"
                        href="/5.16.0/perlop.html">Operators</a>
                    <a class="dropdown-item"
                        href="/5.16.0/perlvar.html">Variables</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-pragmas.html">Pragmas</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-utilities.html">Utilities</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-internals.html">Internals</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-platforms.html">Platforms</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3"
                    class="dropdown-menu letters-wrap">
                    <!--<a class="dropdown-item"
                        href="/5.16.0/index-modules.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-modules-by-cat.html">By
                        Category</a>-->
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-A.html">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-B.html">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-C.html">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-D.html">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-E.html">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-F.html">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-G.html">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-H.html">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-I.html">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-J.html">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-K.html">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-L.html">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-M.html">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-N.html">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-O.html">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-P.html">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-Q.html">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-R.html">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-S.html">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-T.html">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-U.html">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-V.html">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-W.html">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-X.html">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-Y.html">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-modules-Z.html">Z</a>
                    </div>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a id="navbarDropdown4" href="#" class="nav-link dropdown-toggle "
                    data-toggle="dropdown" role="button" aria-haspopup="true"
                    aria-expanded="false">Functions</a>
                <div aria-labelledby="navbarDropdown4"
                    class="dropdown-menu letters-wrap">
                    <a class="dropdown-item"
                        href="/5.16.0/index-functions.html">A-Z</a>
                    <a class="dropdown-item"
                        href="/5.16.0/index-functions-by-cat.html">By
                        Category</a>
                    <div class="dropdown-divider"></div>
                    <div class="letter-container">
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#A">A</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#B">B</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#C">C</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#D">D</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#E">E</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#F">F</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#G">G</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#H">H</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#I">I</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#J">J</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#K">K</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#L">L</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#M">M</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#N">N</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#O">O</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#P">P</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#Q">Q</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#R">R</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#S">S</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#T">T</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#U">U</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#V">V</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#W">W</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#X">X</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#Y">Y</a>
                        <a class="dropdown-item letters"
                            href="/5.16.0/index-functions.html#Z">Z</a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <!--/.nav-collapse -->
</nav>


          <main class="row main-content pb-5 pt-5" id='content'>
            <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
              <div class="row">
                <div class="col-sm-12">
                  <div id="breadcrumbs">
                      
    <a href="../index.html">Home</a>&nbsp; &gt;
    
      
        <a href="../index-modules-T.html">Core modules (T)</a> &gt;
      
    
    Time::HiRes
  

                  </div>
                </div>
              </div>
              <div class="row">
                <article class="col-sm-12 content">
                  <div class="documentation-wrapper">
                    <div id="perl_version">
                      <h7 class='page-title'> Perl 5 version 16.0
                        documentation</h7>
                    </div>
                    <h1>Time::HiRes</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><li><a href="#C-API">C API</a></li><li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li><ul><li><a href="#useconds-or-interval-more-than-...">useconds or interval more than ...</a></li><li><a href="#negative-time-not-invented-yet">negative time not invented yet</a></li><li><a href="#internal-error%3a-useconds-%3c-0-(unsigned-...-signed-...)">internal error: useconds < 0 (unsigned ... signed ...)</a></li><li><a href="#useconds-or-uinterval-equal-to-or-more-than-1000000">useconds or uinterval equal to or more than 1000000</a></li><li><a href="#unimplemented-in-this-platform">unimplemented in this platform</a></li></ul><li><a href="#CAVEATS">CAVEATS</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHORS">AUTHORS</a></li><li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li></ul><a class='view-head1' id="NAME"></a><h2 class='h2' >NAME</h2>
<p>Time::HiRes - High resolution alarm, sleep, gettimeofday, interval timers</p>
<a class='view-head1' id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( usleep ualarm gettimeofday tv_interval nanosleep</span></li><li>		      <span class="q">clock_gettime clock_getres clock_nanosleep clock</span></li><li>                      <span class="q">stat )</span><span class="sc">;</span></li><li></li><li>  <span class="w">usleep</span> <span class="s">(</span><span class="i">$microseconds</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">nanosleep</span> <span class="s">(</span><span class="i">$nanoseconds</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="w">ualarm</span> <span class="s">(</span><span class="i">$microseconds</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">ualarm</span> <span class="s">(</span><span class="i">$microseconds</span><span class="cm">,</span> <span class="i">$interval_microseconds</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$t0</span> = <span class="s">[</span><span class="w">gettimeofday</span><span class="s">]</span><span class="sc">;</span></li><li>  <span class="s">(</span><span class="i">$seconds</span><span class="cm">,</span> <span class="i">$microseconds</span><span class="s">)</span> = <span class="w">gettimeofday</span><span class="sc">;</span></li><li></li><li>  <span class="i">$elapsed</span> = <span class="w">tv_interval</span> <span class="s">(</span> <span class="i">$t0</span><span class="cm">,</span> <span class="s">[</span><span class="i">$seconds</span><span class="cm">,</span> <span class="i">$microseconds</span><span class="s">]</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$elapsed</span> = <span class="w">tv_interval</span> <span class="s">(</span> <span class="i">$t0</span><span class="cm">,</span> <span class="s">[</span><span class="w">gettimeofday</span><span class="s">]</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$elapsed</span> = <span class="w">tv_interval</span> <span class="s">(</span> <span class="i">$t0</span> <span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw ( time alarm sleep )</span><span class="sc">;</span></li><li></li><li>  <span class="i">$now_fractions</span> = <a class="l_k" href="../functions/time.html">time</a><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/sleep.html">sleep</a> <span class="s">(</span><span class="i">$floating_seconds</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/alarm.html">alarm</a> <span class="s">(</span><span class="i">$floating_seconds</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/alarm.html">alarm</a> <span class="s">(</span><span class="i">$floating_seconds</span><span class="cm">,</span> <span class="i">$floating_interval</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( setitimer getitimer )</span><span class="sc">;</span></li><li></li><li>  <span class="w">setitimer</span> <span class="s">(</span><span class="i">$which</span><span class="cm">,</span> <span class="i">$floating_seconds</span><span class="cm">,</span> <span class="i">$floating_interval</span> <span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">getitimer</span> <span class="s">(</span><span class="i">$which</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( clock_gettime clock_getres clock_nanosleep</span></li><li>		      <span class="q">ITIMER_REAL ITIMER_VIRTUAL ITIMER_PROF ITIMER_REALPROF )</span><span class="sc">;</span></li><li></li><li>  <span class="i">$realtime</span>   = <span class="i">clock_gettime</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$resolution</span> = <span class="i">clock_getres</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="i">clock_nanosleep</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="cm">,</span> <span class="n">1.5e9</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">clock_nanosleep</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="cm">,</span> <a class="l_k" href="../functions/time.html">time</a><span class="s">(</span><span class="s">)</span>*<span class="n">1e9</span> + <span class="n">10e9</span><span class="cm">,</span> <span class="w">TIMER_ABSTIME</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$ticktock</span> = <span class="i">clock</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( stat )</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">@stat</span> = <a class="l_k" href="../functions/stat.html">stat</a><span class="s">(</span><span class="q">&quot;file&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">@stat</span> = <a class="l_k" href="../functions/stat.html">stat</a><span class="s">(</span><span class="w">FH</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>The <code class="inline"><span class="w">Time::HiRes</span></code>
 module implements a Perl interface to the
<code class="inline"><span class="w">usleep</span></code>
, <code class="inline"><span class="w">nanosleep</span></code>
, <code class="inline"><span class="w">ualarm</span></code>
, <code class="inline"><span class="w">gettimeofday</span></code>
, and
<code class="inline"><span class="w">setitimer</span></code>
/<code class="inline"><span class="w">getitimer</span></code>
 system calls, in other words, high
resolution time and timers. See the <a href="#EXAMPLES">EXAMPLES</a> section below and the
test scripts for usage; see your system documentation for the
description of the underlying <code class="inline"><span class="w">nanosleep</span></code>
 or <code class="inline"><span class="w">usleep</span></code>
, <code class="inline"><span class="w">ualarm</span></code>
,
<code class="inline"><span class="w">gettimeofday</span></code>
, and <code class="inline"><span class="w">setitimer</span></code>
/<code class="inline"><span class="w">getitimer</span></code>
 calls.</p>
<p>If your system lacks <code class="inline"><span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span></code>
 or an emulation of it you don't
get <code class="inline"><span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span></code>
 or the one-argument form of <code class="inline"><span class="i">tv_interval</span><span class="s">(</span><span class="s">)</span></code>
.
If your system lacks all of <code class="inline"><span class="i">nanosleep</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">usleep</span><span class="s">(</span><span class="s">)</span></code>
,
<code class="inline"><a class="l_k" href="../functions/select.html">select()</a></code>, and <code class="inline"><span class="w">poll</span></code>
, you don't get <code class="inline"><span class="i">Time::HiRes::usleep</span><span class="s">(</span><span class="s">)</span></code>
,
<code class="inline"><span class="i">Time::HiRes::nanosleep</span><span class="s">(</span><span class="s">)</span></code>
, or <code class="inline"><span class="i">Time::HiRes::sleep</span><span class="s">(</span><span class="s">)</span></code>
.
If your system lacks both <code class="inline"><span class="i">ualarm</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">setitimer</span><span class="s">(</span><span class="s">)</span></code>
 you don't get
<code class="inline"><span class="i">Time::HiRes::ualarm</span><span class="s">(</span><span class="s">)</span></code>
 or <code class="inline"><span class="i">Time::HiRes::alarm</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<p>If you try to import an unimplemented function in the <code class="inline"><a class="l_k" href="../functions/use.html">use</a></code> statement
it will fail at compile time.</p>
<p>If your subsecond sleeping is implemented with <code class="inline"><span class="i">nanosleep</span><span class="s">(</span><span class="s">)</span></code>
 instead
of <code class="inline"><span class="i">usleep</span><span class="s">(</span><span class="s">)</span></code>
, you can mix subsecond sleeping with signals since
<code class="inline"><span class="i">nanosleep</span><span class="s">(</span><span class="s">)</span></code>
 does not use signals.  This, however, is not portable,
and you should first check for the truth value of
<code class="inline"><span class="i">&amp;Time::HiRes::d_nanosleep</span></code>
 to see whether you have nanosleep, and
then carefully read your <code class="inline"><span class="i">nanosleep</span><span class="s">(</span><span class="s">)</span></code>
 C API documentation for any
peculiarities.</p>
<p>If you are using <code class="inline"><span class="w">nanosleep</span></code>
 for something else than mixing sleeping
with signals, give some thought to whether Perl is the tool you should
be using for work requiring nanosecond accuracies.</p>
<p>Remember that unless you are working on a <i>hard realtime</i> system,
any clocks and timers will be imprecise, especially so if you are working
in a pre-emptive multiuser system.  Understand the difference between
<i>wallclock time</i> and process time (in UNIX-like systems the sum of
<i>user</i> and <i>system</i> times).  Any attempt to sleep for X seconds will
most probably end up sleeping <strong>more</strong> than that, but don't be surpised
if you end up sleeping slightly <strong>less</strong>.</p>
<p>The following functions can be imported from this module.
No functions are exported by default.</p>
<ul>
<li><a class='view-title' id="gettimeofday-()"></a><strong>gettimeofday ()</strong>
<p>In array context returns a two-element array with the seconds and
microseconds since the epoch.  In scalar context returns floating
seconds like <code class="inline"><span class="i">Time::HiRes::time</span><span class="s">(</span><span class="s">)</span></code>
 (see below).</p>
</li>
<li><a class='view-title' id="usleep-(-%24useconds-)"></a><strong>usleep ( $useconds )</strong>
<p>Sleeps for the number of microseconds (millionths of a second)
specified.  Returns the number of microseconds actually slept.
Can sleep for more than one second, unlike the <code class="inline"><span class="w">usleep</span></code>
 system call.
Can also sleep for zero seconds, which often works like a <i>thread yield</i>.
See also <code class="inline"><span class="i">Time::HiRes::usleep</span><span class="s">(</span><span class="s">)</span></code>
, <code class="inline"><span class="i">Time::HiRes::sleep</span><span class="s">(</span><span class="s">)</span></code>
, and
<code class="inline"><span class="i">Time::HiRes::clock_nanosleep</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<p>Do not expect usleep() to be exact down to one microsecond.</p>
</li>
<li><a class='view-title' id="nanosleep-(-%24nanoseconds-)"></a><strong>nanosleep ( $nanoseconds )</strong>
<p>Sleeps for the number of nanoseconds (1e9ths of a second) specified.
Returns the number of nanoseconds actually slept (accurate only to
microseconds, the nearest thousand of them).  Can sleep for more than
one second.  Can also sleep for zero seconds, which often works like
a <i>thread yield</i>.  See also <code class="inline"><span class="i">Time::HiRes::sleep</span><span class="s">(</span><span class="s">)</span></code>
,
<code class="inline"><span class="i">Time::HiRes::usleep</span><span class="s">(</span><span class="s">)</span></code>
, and <code class="inline"><span class="i">Time::HiRes::clock_nanosleep</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<p>Do not expect nanosleep() to be exact down to one nanosecond.
Getting even accuracy of one thousand nanoseconds is good.</p>
</li>
<li><a class='view-title' id="ualarm-(-%24useconds-%5b%2c-%24interval_useconds-%5d-)"></a><strong>ualarm ( $useconds [, $interval_useconds ] )</strong>
<p>Issues a <code class="inline"><span class="w">ualarm</span></code>
 call; the <code class="inline"><span class="i">$interval_useconds</span></code>
 is optional and
will be zero if unspecified, resulting in <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm</a></code>-like behaviour.</p>
<p>Returns the remaining time in the alarm in microseconds, or <code class="inline"><a class="l_k" href="../functions/undef.html">undef</a></code>
if an error occurred.</p>
<p>ualarm(0) will cancel an outstanding ualarm().</p>
<p>Note that the interaction between alarms and sleeps is unspecified.</p>
</li>
<li><a class='view-title' id="tv_interval"></a><strong>tv_interval</strong>
<p>tv_interval ( $ref_to_gettimeofday [, $ref_to_later_gettimeofday] )</p>
<p>Returns the floating seconds between the two times, which should have
been returned by <code class="inline"><span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span></code>
. If the second argument is omitted,
then the current time is used.</p>
</li>
<li><a class='view-title' id="time-()"></a><strong>time ()</strong>
<p>Returns a floating seconds since the epoch. This function can be
imported, resulting in a nice drop-in replacement for the <code class="inline"><a class="l_k" href="../functions/time.html">time</a></code>
provided with core Perl; see the <a href="#EXAMPLES">EXAMPLES</a> below.</p>
<p><strong>NOTE 1</strong>: This higher resolution timer can return values either less
or more than the core <code class="inline"><a class="l_k" href="../functions/time.html">time()</a></code>, depending on whether your platform
rounds the higher resolution timer values up, down, or to the nearest second
to get the core <code class="inline"><a class="l_k" href="../functions/time.html">time()</a></code>, but naturally the difference should be never
more than half a second.  See also <a href="#clock_getres">clock_getres</a>, if available
in your system.</p>
<p><strong>NOTE 2</strong>: Since Sunday, September 9th, 2001 at 01:46:40 AM GMT, when
the <code class="inline"><a class="l_k" href="../functions/time.html">time()</a></code> seconds since epoch rolled over to 1_000_000_000, the
default floating point format of Perl and the seconds since epoch have
conspired to produce an apparent bug: if you print the value of
<code class="inline"><span class="i">Time::HiRes::time</span><span class="s">(</span><span class="s">)</span></code>
 you seem to be getting only five decimals, not
six as promised (microseconds).  Not to worry, the microseconds are
there (assuming your platform supports such granularity in the first
place).  What is going on is that the default floating point format of
Perl only outputs 15 digits.  In this case that means ten digits
before the decimal separator and five after.  To see the microseconds
you can use either <code class="inline"><a class="l_k" href="../functions/printf.html">printf</a></code>/<code class="inline"><a class="l_k" href="../functions/sprintf.html">sprintf</a></code> with <code class="inline"><span class="q">&quot;%.6f&quot;</span></code>
, or the
<code class="inline"><span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span></code>
 function in list context, which will give you the
seconds and microseconds as two separate values.</p>
</li>
<li><a class='view-title' id="sleep-(-%24floating_seconds-)"></a><strong>sleep ( $floating_seconds )</strong>
<p>Sleeps for the specified amount of seconds.  Returns the number of
seconds actually slept (a floating point value).  This function can
be imported, resulting in a nice drop-in replacement for the <code class="inline"><a class="l_k" href="../functions/sleep.html">sleep</a></code>
provided with perl, see the <a href="#EXAMPLES">EXAMPLES</a> below.</p>
<p>Note that the interaction between alarms and sleeps is unspecified.</p>
</li>
<li><a class='view-title' id="alarm-(-%24floating_seconds-%5b%2c-%24interval_floating_seconds-%5d-)"></a><strong>alarm ( $floating_seconds [, $interval_floating_seconds ] )</strong>
<p>The <code class="inline"><span class="w">SIGALRM</span></code>
 signal is sent after the specified number of seconds.
Implemented using <code class="inline"><span class="i">setitimer</span><span class="s">(</span><span class="s">)</span></code>
 if available, <code class="inline"><span class="i">ualarm</span><span class="s">(</span><span class="s">)</span></code>
 if not.
The <code class="inline"><span class="i">$interval_floating_seconds</span></code>
 argument is optional and will be
zero if unspecified, resulting in <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code>-like behaviour.  This
function can be imported, resulting in a nice drop-in replacement for
the <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm</a></code> provided with perl, see the <a href="#EXAMPLES">EXAMPLES</a> below.</p>
<p>Returns the remaining time in the alarm in seconds, or <code class="inline"><a class="l_k" href="../functions/undef.html">undef</a></code>
if an error occurred.</p>
<p><strong>NOTE 1</strong>: With some combinations of operating systems and Perl
releases <code class="inline"><span class="w">SIGALRM</span></code>
 restarts <code class="inline"><a class="l_k" href="../functions/select.html">select()</a></code>, instead of interrupting it.
This means that an <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code> followed by a <code class="inline"><a class="l_k" href="../functions/select.html">select()</a></code> may together
take the sum of the times specified for the <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code> and the
<code class="inline"><a class="l_k" href="../functions/select.html">select()</a></code>, not just the time of the <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code>.</p>
<p>Note that the interaction between alarms and sleeps is unspecified.</p>
</li>
<li><a class='view-title' id="setitimer-(-%24which%2c-%24floating_seconds-%5b%2c-%24interval_floating_seconds-%5d-)"></a><strong>setitimer ( $which, $floating_seconds [, $interval_floating_seconds ] )</strong>
<p>Start up an interval timer: after a certain time, a signal ($which) arrives,
and more signals may keep arriving at certain intervals.  To disable
an "itimer", use <code class="inline"><span class="i">$floating_seconds</span></code>
 of zero.  If the
<code class="inline"><span class="i">$interval_floating_seconds</span></code>
 is set to zero (or unspecified), the
timer is disabled <strong>after</strong> the next delivered signal.</p>
<p>Use of interval timers may interfere with <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code>, <code class="inline"><a class="l_k" href="../functions/sleep.html">sleep()</a></code>,
and <code class="inline"><span class="i">usleep</span><span class="s">(</span><span class="s">)</span></code>
.  In standard-speak the "interaction is unspecified",
which means that <i>anything</i> may happen: it may work, it may not.</p>
<p>In scalar context, the remaining time in the timer is returned.</p>
<p>In list context, both the remaining time and the interval are returned.</p>
<p>There are usually three or four interval timers (signals) available: the
<code class="inline"><span class="i">$which</span></code>
 can be <code class="inline"><span class="w">ITIMER_REAL</span></code>
, <code class="inline"><span class="w">ITIMER_VIRTUAL</span></code>
, <code class="inline"><span class="w">ITIMER_PROF</span></code>
, or
<code class="inline"><span class="w">ITIMER_REALPROF</span></code>
.  Note that which ones are available depends: true
UNIX platforms usually have the first three, but only Solaris seems to
have <code class="inline"><span class="w">ITIMER_REALPROF</span></code>
 (which is used to profile multithreaded programs).
Win32 unfortunately does not haveinterval timers.</p>
<p><code class="inline"><span class="w">ITIMER_REAL</span></code>
 results in <code class="inline"><a class="l_k" href="../functions/alarm.html">alarm()</a></code>-like behaviour.  Time is counted in
<i>real time</i>; that is, wallclock time.  <code class="inline"><span class="w">SIGALRM</span></code>
 is delivered when
the timer expires.</p>
<p><code class="inline"><span class="w">ITIMER_VIRTUAL</span></code>
 counts time in (process) <i>virtual time</i>; that is,
only when the process is running.  In multiprocessor/user/CPU systems
this may be more or less than real or wallclock time.  (This time is
also known as the <i>user time</i>.)  <code class="inline"><span class="w">SIGVTALRM</span></code>
 is delivered when the
timer expires.</p>
<p><code class="inline"><span class="w">ITIMER_PROF</span></code>
 counts time when either the process virtual time or when
the operating system is running on behalf of the process (such as I/O).
(This time is also known as the <i>system time</i>.)  (The sum of user
time and system time is known as the <i>CPU time</i>.)  <code class="inline"><span class="w">SIGPROF</span></code>
 is
delivered when the timer expires.  <code class="inline"><span class="w">SIGPROF</span></code>
 can interrupt system calls.</p>
<p>The semantics of interval timers for multithreaded programs are
system-specific, and some systems may support additional interval
timers.  For example, it is unspecified which thread gets the signals.
See your <code class="inline"><span class="i">setitimer</span><span class="s">(</span><span class="s">)</span></code>
 documentation.</p>
</li>
<li><a class='view-title' id="getitimer-(-%24which-)"></a><strong>getitimer ( $which )</strong>
<p>Return the remaining time in the interval timer specified by <code class="inline"><span class="i">$which</span></code>
.</p>
<p>In scalar context, the remaining time is returned.</p>
<p>In list context, both the remaining time and the interval are returned.
The interval is always what you put in using <code class="inline"><span class="i">setitimer</span><span class="s">(</span><span class="s">)</span></code>
.</p>
</li>
<li><a class='view-title' id="clock_gettime-(-%24which-)"></a><strong>clock_gettime ( $which )</strong>
<p>Return as seconds the current value of the POSIX high resolution timer
specified by <code class="inline"><span class="i">$which</span></code>
.  All implementations that support POSIX high
resolution timers are supposed to support at least the <code class="inline"><span class="i">$which</span></code>
 value
of <code class="inline"><span class="w">CLOCK_REALTIME</span></code>
, which is supposed to return results close to the
results of <code class="inline"><span class="w">gettimeofday</span></code>
, or the number of seconds since 00:00:00:00
January 1, 1970 Greenwich Mean Time (GMT).  Do not assume that
CLOCK_REALTIME is zero, it might be one, or something else.
Another potentially useful (but not available everywhere) value is
<code class="inline"><span class="w">CLOCK_MONOTONIC</span></code>
, which guarantees a monotonically increasing time
value (unlike time() or gettimeofday(), which can be adjusted).
See your system documentation for other possibly supported values.</p>
</li>
<li><a class='view-title' id="clock_getres-(-%24which-)"></a><strong>clock_getres ( $which )</strong>
<p>Return as seconds the resolution of the POSIX high resolution timer
specified by <code class="inline"><span class="i">$which</span></code>
.  All implementations that support POSIX high
resolution timers are supposed to support at least the <code class="inline"><span class="i">$which</span></code>
 value
of <code class="inline"><span class="w">CLOCK_REALTIME</span></code>
, see <a href="#clock_gettime">clock_gettime</a>.</p>
</li>
<li><a class='view-title' id="clock_nanosleep-(-%24which%2c-%24nanoseconds%2c-%24flags-%3d-0)"></a><strong>clock_nanosleep ( $which, $nanoseconds, $flags = 0)</strong>
<p>Sleeps for the number of nanoseconds (1e9ths of a second) specified.
Returns the number of nanoseconds actually slept.  The $which is the
"clock id", as with clock_gettime() and clock_getres().  The flags
default to zero but <code class="inline"><span class="w">TIMER_ABSTIME</span></code>
 can specified (must be exported
explicitly) which means that <code class="inline"><span class="i">$nanoseconds</span></code>
 is not a time interval
(as is the default) but instead an absolute time.  Can sleep for more
than one second.  Can also sleep for zero seconds, which often works
like a <i>thread yield</i>.  See also <code class="inline"><span class="i">Time::HiRes::sleep</span><span class="s">(</span><span class="s">)</span></code>
,
<code class="inline"><span class="i">Time::HiRes::usleep</span><span class="s">(</span><span class="s">)</span></code>
, and <code class="inline"><span class="i">Time::HiRes::nanosleep</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<p>Do not expect clock_nanosleep() to be exact down to one nanosecond.
Getting even accuracy of one thousand nanoseconds is good.</p>
</li>
<li><a class='view-title' id="clock()"></a><strong>clock()</strong>
<p>Return as seconds the <i>process time</i> (user + system time) spent by
the process since the first call to clock() (the definition is <strong>not</strong>
"since the start of the process", though if you are lucky these times
may be quite close to each other, depending on the system).  What this
means is that you probably need to store the result of your first call
to clock(), and subtract that value from the following results of clock().</p>
<p>The time returned also includes the process times of the terminated
child processes for which wait() has been executed.  This value is
somewhat like the second value returned by the times() of core Perl,
but not necessarily identical.  Note that due to backward
compatibility limitations the returned value may wrap around at about
2147 seconds or at about 36 minutes.</p>
</li>
<li><a class='view-title' id="stat"></a><strong>stat</strong>
</li>
<li><a class='view-title' id="stat-FH"></a><strong>stat FH</strong>
</li>
<li><a class='view-title' id="stat-EXPR"></a><strong>stat EXPR</strong>
<p>As <a class='function-name' href="../functions/stat.html">stat</a> but with the access/modify/change file timestamps
in subsecond resolution, if the operating system and the filesystem
both support such timestamps.  To override the standard stat():</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw(stat)</span><span class="sc">;</span></li></ol></pre><p>Test for the value of &amp;Time::HiRes::d_hires_stat to find out whether
the operating system supports subsecond file timestamps: a value
larger than zero means yes. There are unfortunately no easy
ways to find out whether the filesystem supports such timestamps.
UNIX filesystems often do; NTFS does; FAT doesn't (FAT timestamp
granularity is <strong>two</strong> seconds).</p>
<p>A zero return value of &amp;Time::HiRes::d_hires_stat means that
Time::HiRes::stat is a no-op passthrough for CORE::stat(),
and therefore the timestamps will stay integers.  The same
thing will happen if the filesystem does not do subsecond timestamps,
even if the &amp;Time::HiRes::d_hires_stat is non-zero.</p>
<p>In any case do not expect nanosecond resolution, or even a microsecond
resolution.  Also note that the modify/access timestamps might have
different resolutions, and that they need not be synchronized, e.g.
if the operations are</p>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/write.html">write</a></li><li>    <a class="l_k" href="../functions/stat.html">stat</a> <span class="c"># t1</span></li><li>    <a class="l_k" href="../functions/read.html">read</a></li><li>    <a class="l_k" href="../functions/stat.html">stat</a> <span class="c"># t2</span></li></ol></pre><p>the access time stamp from t2 need not be greater-than the modify
time stamp from t1: it may be equal or <i>less</i>.</p>
</li>
</ul>
<a class='view-head1' id="EXAMPLES"></a><h2 class='h2' >EXAMPLES</h2>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw(usleep ualarm gettimeofday tv_interval)</span><span class="sc">;</span></li><li></li><li>  <span class="i">$microseconds</span> = <span class="n">750_000</span><span class="sc">;</span></li><li>  <span class="i">usleep</span><span class="s">(</span><span class="i">$microseconds</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="c"># signal alarm in 2.5s &amp; every .1s thereafter</span></li><li>  <span class="i">ualarm</span><span class="s">(</span><span class="n">2_500_000</span><span class="cm">,</span> <span class="n">100_000</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="c"># cancel that ualarm</span></li><li>  <span class="i">ualarm</span><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="c"># get seconds and microseconds since the epoch</span></li><li>  <span class="s">(</span><span class="i">$s</span><span class="cm">,</span> <span class="i">$usec</span><span class="s">)</span> = <span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="c"># measure elapsed time </span></li><li>  <span class="c"># (could also do by subtracting 2 gettimeofday return values)</span></li><li>  <span class="i">$t0</span> = <span class="s">[</span><span class="w">gettimeofday</span><span class="s">]</span><span class="sc">;</span></li><li>  <span class="c"># do bunch of stuff here</span></li><li>  <span class="i">$t1</span> = <span class="s">[</span><span class="w">gettimeofday</span><span class="s">]</span><span class="sc">;</span></li><li>  <span class="c"># do more stuff here</span></li><li>  <span class="i">$t0_t1</span> = <span class="w">tv_interval</span> <span class="i">$t0</span><span class="cm">,</span> <span class="i">$t1</span><span class="sc">;</span></li><li></li><li>  <span class="i">$elapsed</span> = <span class="w">tv_interval</span> <span class="s">(</span><span class="i">$t0</span><span class="cm">,</span> <span class="s">[</span><span class="w">gettimeofday</span><span class="s">]</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">$elapsed</span> = <span class="w">tv_interval</span> <span class="s">(</span><span class="i">$t0</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># equivalent code</span></li><li></li><li>  <span class="c">#</span></li><li>  <span class="c"># replacements for time, alarm and sleep that know about</span></li><li>  <span class="c"># floating seconds</span></li><li>  <span class="c">#</span></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span><span class="sc">;</span></li><li>  <span class="i">$now_fractions</span> = <span class="w">Time::HiRes::time</span><span class="sc">;</span></li><li>  <span class="w">Time::HiRes::sleep</span> <span class="s">(</span><span class="n">2.5</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">Time::HiRes::alarm</span> <span class="s">(</span><span class="n">10.6666666</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw ( time alarm sleep )</span><span class="sc">;</span></li><li>  <span class="i">$now_fractions</span> = <a class="l_k" href="../functions/time.html">time</a><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/sleep.html">sleep</a> <span class="s">(</span><span class="n">2.5</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/alarm.html">alarm</a> <span class="s">(</span><span class="n">10.6666666</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <span class="c"># Arm an interval timer to go off first at 10 seconds and</span></li><li>  <span class="c"># after that every 2.5 seconds, in process virtual time</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw ( setitimer ITIMER_VIRTUAL time )</span><span class="sc">;</span></li><li></li><li>  <span class="i">$SIG</span>{<span class="w">VTALRM</span>} = <a class="l_k" href="../functions/sub.html">sub</a> <span class="s">{</span> <a class="l_k" href="../functions/print.html">print</a> <a class="l_k" href="../functions/time.html">time</a><span class="cm">,</span> <span class="q">&quot;\n&quot;</span> <span class="s">}</span><span class="sc">;</span></li><li>  <span class="i">setitimer</span><span class="s">(</span><span class="w">ITIMER_VIRTUAL</span><span class="cm">,</span> <span class="n">10</span><span class="cm">,</span> <span class="n">2.5</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( clock_gettime clock_getres CLOCK_REALTIME )</span><span class="sc">;</span></li><li>  <span class="c"># Read the POSIX high resolution timer.</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$high</span> = <span class="i">clock_getres</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="c"># But how accurate we can be, really?</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$reso</span> = <span class="i">clock_getres</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( clock_nanosleep TIMER_ABSTIME )</span><span class="sc">;</span></li><li>  <span class="i">clock_nanosleep</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="cm">,</span> <span class="n">1e6</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="i">clock_nanosleep</span><span class="s">(</span><span class="w">CLOCK_REALTIME</span><span class="cm">,</span> <span class="n">2e9</span><span class="cm">,</span> <span class="w">TIMER_ABSTIME</span><span class="s">)</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( clock )</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$clock0</span> = <span class="i">clock</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>  ... <span class="c"># Do something.</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$clock1</span> = <span class="i">clock</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="i">$clockd</span> = <span class="i">$clock1</span> - <span class="i">$clock0</span><span class="sc">;</span></li><li></li><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">Time::HiRes</span> <span class="q">qw( stat )</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/my.html">my</a> <span class="s">(</span><span class="i">$atime</span><span class="cm">,</span> <span class="i">$mtime</span><span class="cm">,</span> <span class="i">$ctime</span><span class="s">)</span> = <span class="s">(</span><a class="l_k" href="../functions/stat.html">stat</a><span class="s">(</span><span class="q">&quot;istics&quot;</span><span class="s">)</span><span class="s">)</span>[<span class="n">8</span><span class="cm">,</span> <span class="n">9</span><span class="cm">,</span> <span class="n">10</span>]<span class="sc">;</span></li></ol></pre><a class='view-head1' id="C-API"></a><h2 class='h2' >C API</h2>
<p>In addition to the perl API described above, a C API is available for
extension writers.  The following C functions are available in the
modglobal hash:</p>
<pre class="verbatim"><ol><li>  <span class="w">name</span>             <span class="w">C</span> <a class="l_k" href="../functions/prototype.html">prototype</a></li><li>  ---------------  ----------------------</li><li>  <span class="w">Time::NVtime</span>     <span class="w">double</span> <span class="s">(</span><span class="i">*)</span><span class="s">(</span><span class="s">)</span></li><li>  <span class="w">Time::U2time</span>     <span class="w">void</span> <span class="s">(</span><span class="i">*)</span><span class="s">(</span><span class="w">pTHX_</span> <span class="w">UV</span> <span class="w">ret</span><span class="s">[</span><span class="n">2</span><span class="s">]</span><span class="s">)</span></li></ol></pre><p>Both functions return equivalent information (like <code class="inline"><span class="w">gettimeofday</span></code>
)
but with different representations.  The names <code class="inline"><span class="w">NVtime</span></code>
 and <code class="inline"><span class="w">U2time</span></code>

were selected mainly because they are operating system independent.
(<code class="inline"><span class="w">gettimeofday</span></code>
 is Unix-centric, though some platforms like Win32 and
VMS have emulations for it.)</p>
<p>Here is an example of using <code class="inline"><span class="w">NVtime</span></code>
 from C:</p>
<pre class="verbatim"><ol><li>  <span class="w">double</span> <span class="s">(</span><span class="i">*myNVtime</span><span class="s">)</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="q">/* Returns -1 on failure. */</span></li><li>  <span class="w">SV</span> **<span class="w">svp</span> = <span class="i">hv_fetch</span><span class="s">(</span><span class="w">PL_modglobal</span><span class="cm">,</span> <span class="q">&quot;Time::NVtime&quot;</span><span class="cm">,</span> <span class="n">12</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/if.html">if</a> <span class="s">(</span>!<span class="w">svp</span><span class="s">)</span>         <span class="i">croak</span><span class="s">(</span><span class="q">&quot;Time::HiRes is required&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/if.html">if</a> <span class="s">(</span>!<span class="i">SvIOK</span><span class="s">(</span><span class="i">*svp</span><span class="s">)</span><span class="s">)</span> <span class="i">croak</span><span class="s">(</span><span class="q">&quot;Time::NVtime isn&#39;t a function pointer&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>  <span class="w">myNVtime</span> = <span class="i">INT2PTR</span><span class="s">(</span><span class="i">double</span><span class="s">(</span><span class="i">*)</span><span class="s">(</span><span class="s">)</span><span class="cm">,</span> <span class="i">SvIV</span><span class="s">(</span><span class="i">*svp</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li><li>  <a class="l_k" href="../functions/printf.html">printf</a><span class="s">(</span><span class="q">&quot;The current time is: %f\n&quot;</span><span class="cm">,</span> <span class="s">(</span><span class="i">*myNVtime</span><span class="s">)</span><span class="s">(</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span></li></ol></pre><a class='view-head1' id="DIAGNOSTICS"></a><h2 class='h2' >DIAGNOSTICS</h2>
<a class='view-head2' id="useconds-or-interval-more-than-..."></a><h3 class='h3' >useconds or interval more than ...</h3>
<p>In ualarm() you tried to use number of microseconds or interval (also
in microseconds) more than 1_000_000 and setitimer() is not available
in your system to emulate that case.</p>
<a class='view-head2' id="negative-time-not-invented-yet"></a><h3 class='h3' >negative time not invented yet</h3>
<p>You tried to use a negative time argument.</p>
<a class='view-head2' id="internal-error%3a-useconds-%3c-0-(unsigned-...-signed-...)"></a><h3 class='h3' >internal error: useconds &lt; 0 (unsigned ... signed ...)</h3>
<p>Something went horribly wrong-- the number of microseconds that cannot
become negative just became negative.  Maybe your compiler is broken?</p>
<a class='view-head2' id="useconds-or-uinterval-equal-to-or-more-than-1000000"></a><h3 class='h3' >useconds or uinterval equal to or more than 1000000</h3>
<p>In some platforms it is not possible to get an alarm with subsecond
resolution and later than one second.</p>
<a class='view-head2' id="unimplemented-in-this-platform"></a><h3 class='h3' >unimplemented in this platform</h3>
<p>Some calls simply aren't available, real or emulated, on every platform.</p>
<a class='view-head1' id="CAVEATS"></a><h2 class='h2' >CAVEATS</h2>
<p>Notice that the core <code class="inline"><a class="l_k" href="../functions/time.html">time()</a></code> maybe rounding rather than truncating.
What this means is that the core <code class="inline"><a class="l_k" href="../functions/time.html">time()</a></code> may be reporting the time
as one second later than <code class="inline"><span class="i">gettimeofday</span><span class="s">(</span><span class="s">)</span></code>
 and <code class="inline"><span class="i">Time::HiRes::time</span><span class="s">(</span><span class="s">)</span></code>
.</p>
<p>Adjusting the system clock (either manually or by services like ntp)
may cause problems, especially for long running programs that assume
a monotonously increasing time (note that all platforms do not adjust
time as gracefully as UNIX ntp does).  For example in Win32 (and derived
platforms like Cygwin and MinGW) the Time::HiRes::time() may temporarily
drift off from the system clock (and the original time())  by up to 0.5
seconds. Time::HiRes will notice this eventually and recalibrate.
Note that since Time::HiRes 1.77 the clock_gettime(CLOCK_MONOTONIC)
might help in this (in case your system supports CLOCK_MONOTONIC).</p>
<p>Some systems have APIs but not implementations: for example QNX and Haiku
have the interval timer APIs but not the functionality.</p>
<a class='view-head1' id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p>Perl modules <a href="https://search.cpan.org/perldoc/BSD::Resource">BSD::Resource</a>, <a href="https://search.cpan.org/perldoc/Time::TAI64">Time::TAI64</a>.</p>
<p>Your system documentation for <code class="inline"><span class="w">clock</span></code>
, <code class="inline"><span class="w">clock_gettime</span></code>
,
<code class="inline"><span class="w">clock_getres</span></code>
, <code class="inline"><span class="w">clock_nanosleep</span></code>
, <code class="inline"><span class="w">clock_settime</span></code>
, <code class="inline"><span class="w">getitimer</span></code>
,
<code class="inline"><span class="w">gettimeofday</span></code>
, <code class="inline"><span class="w">setitimer</span></code>
, <code class="inline"><a class="l_k" href="../functions/sleep.html">sleep</a></code>, <code class="inline"><a class="l_k" href="../functions/stat.html">stat</a></code>, <code class="inline"><span class="w">ualarm</span></code>
.</p>
<a class='view-head1' id="AUTHORS"></a><h2 class='h2' >AUTHORS</h2>
<p>D. Wegscheid &lt;wegscd@whirlpool.com&gt;
R. Schertler &lt;roderick@argon.org&gt;
J. Hietaniemi &lt;jhi@iki.fi&gt;
G. Aas &lt;gisle@aas.no&gt;</p>
<a class='view-head1' id="COPYRIGHT-AND-LICENSE"></a><h2 class='h2' >COPYRIGHT AND LICENSE</h2>
<p>Copyright (c) 1996-2002 Douglas E. Wegscheid.  All rights reserved.</p>
<p>Copyright (c) 2002, 2003, 2004, 2005, 2006, 2007, 2008 Jarkko Hietaniemi.
All rights reserved.</p>
<p>Copyright (C) 2011, 2012 Andrew Main (Zefram) &lt;zefram@fysh.org&gt;</p>
<p>This program is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><li><a href="#C-API">C API</a></li><li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li><ul><li><a href="#useconds-or-interval-more-than-...">useconds or interval more than ...</a></li><li><a href="#negative-time-not-invented-yet">negative time not invented yet</a></li><li><a href="#internal-error%3a-useconds-%3c-0-(unsigned-...-signed-...)">internal error: useconds < 0 (unsigned ... signed ...)</a></li><li><a href="#useconds-or-uinterval-equal-to-or-more-than-1000000">useconds or uinterval equal to or more than 1000000</a></li><li><a href="#unimplemented-in-this-platform">unimplemented in this platform</a></li></ul><li><a href="#CAVEATS">CAVEATS</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHORS">AUTHORS</a></li><li><a href="#COPYRIGHT-AND-LICENSE">COPYRIGHT AND LICENSE</a></li></ul>


                  </div>
                </article>
              </div>
            </div>
          </main>
        </div>
           <footer class="footer row bg-light pt-5 pb-5">
       <div class="col-sm-10 offset-sm-1 col-xl-8 offset-xl-2">
           <div class="row">
               <div class="col-md-4">
                   <ul class="list-unstyled">
                       <li>
                           <h4>Site info</h4>
                       </li>
                       <li>Docs mantained by
                           <a href="//lists.perl.org/list/perl5-porters.html"
                               rel="noopener">Perl 5 Porters</a>
                       </li>
                       <li>Perldoc site development sponsored by
                           <a href="//opusvl.com" rel="noopener">
                           <img style="margin: 20px 20px 5px 10px" class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo">
                        </a>
                    <li><span class="about_perldoc"><a href="//about.html">About PerlDOC</a></span>
                    </li>
                       </li>
                   </ul>
               </div>
               <div class="col-md-8">
                   <div class="row">
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Manuals</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-overview.html">Overview</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-tutorials.html">Tutorials</a>
                               </li>
                               <li>
                                   <a href="/5.16.0/index-faq.html">FAQs</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-history.html">Changes</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Reference</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-language.html">Language</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-functions.html">Functions</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/perlop.html">Operators</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/perlvar.html">Variables</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Modules</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-modules-A.html">Modules</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-pragmas.html">Pragmas</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-utilities.html">Utilities</a>
                               </li>
                           </ul>
                       </div>
                       <div class="col-md-6 col-lg-3">
                           <ul class=" list-unstyled">
                               <li>
                                   <h4>Misc</h4>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-licence.html">License</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-internals.html">Internals</a>
                               </li>
                               <li>
                                   <a
                                       href="/5.16.0/index-platforms.html">Platforms</a>
                               </li>
                            <li>
                                <a
                                    href="/5.16.0/index-about.html">About</a>
                            </li>
                           </ul>
                       </div>
                   </div>
               </div>
               <div class=" col-12 footer-inf text-center">
                   <small>perldoc.perl.org - Official documentation for the Perl
                       programming language</small>
               </div>
           </div>
       </div>
   </footer>

        	<div class="beta-wrapper beta-bottom-right ">
		<div class="beta beta-blue  ">
			<a class="beta-link "
				href="//github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
				<span class="beta-text">
					This website is a Beta release.
				</span>
				<span class="beta-text">
					For any issues please raise a ticket on GitHub
				</span>
			</a>
		</div>
	</div>

        <script src="/public/js/main.min.js"></script>
      </body>

      </html>
